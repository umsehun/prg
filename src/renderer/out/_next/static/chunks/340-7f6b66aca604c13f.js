"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[340],{826:(e,r,t)=>{t.d(r,{cn:()=>s});var a=t(2902),o=t(3714);function s(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,a.$)(r))}},1119:(e,r,t)=>{t.d(r,{a:()=>o});class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}get api(){if(!window.electronAPI)throw Error("Electron API not available. Make sure this is running in Electron.");return window.electronAPI}async getDifficulties(e){return await this.api.game.getDifficulties(e)}async startGame(e){console.log("\uD83D\uDD0C IPC: Calling game.start with params:",e);let r=await this.api.game.start(e);if(console.log("\uD83D\uDD0C IPC: game.start result:",r),!r.success)throw console.error("\uD83D\uDD0C IPC: Game start failed:",r.error),Error(r.error||"Failed to start game");return console.log("\uD83D\uDD0C IPC: Game start successful, returning mock session"),{sessionId:"mock-session-"+Date.now(),chartId:e.chartId,startTime:Date.now(),score:0,accuracy:1,combo:0}}async stopGame(){let e=await this.api.game.stop();if(!e.success)throw Error(e.error||"Failed to stop game")}async pauseGame(){let e=await this.api.game.pause();if(!e.success)throw Error(e.error||"Failed to pause game")}async resumeGame(){let e=await this.api.game.resume();if(!e.success)throw Error(e.error||"Failed to resume game")}throwKnife(e){this.api.game.throwKnife({id:e.id,time:e.time})}onKnifeResult(e){return this.api.game.onKnifeResult(e)}async getChartLibrary(){let e=await this.api.osz.getLibrary();if(!e.success)throw Error(e.error||"Failed to load chart library");return e.charts||[]}async getChart(e){let r=(await this.getChartLibrary()).find(r=>r.id===e);if(!r)throw Error("Chart ".concat(e," not found"));return r}async importChart(e){let r=await this.api.osz.import(e);return{success:r.success,error:r.error}}async removeChart(e){let r=await this.api.osz.removeChart(e);if(!r.success)throw Error(r.error||"Failed to remove chart")}async getChartAudio(e){let r=await this.api.osz.getAudio(e);if(!r.success)throw Error(r.error||"Failed to get audio");return"mock-audio-url"}async getChartBackground(e){return"mock-background-url"}async getSettings(){let e=await this.api.settings.getAll();if(!e.success)throw Error(e.error||"Failed to load settings");return e.settings||{audio:{masterVolume:1,musicVolume:.8,effectVolume:.6,enableFeedback:!0},game:{scrollSpeed:1,noteSize:1,enableParticles:!0,showFps:!1},display:{fullscreen:!1,vsync:!0,targetFps:60},controls:{keyBindings:{lane1:"D",lane2:"F",lane3:"J",lane4:"K"}}}}async setSetting(e,r){let t=await this.api.settings.set(e,r);if(!t.success)throw Error(t.error||"Failed to update setting")}async resetSettings(){let e=await this.api.settings.reset();if(!e.success)throw Error(e.error||"Failed to reset settings")}onSettingsChange(e){return this.api.settings.onChange(r=>{this.getSettings().then(e).catch(console.error)})}async getVersion(){return this.api.system.version||"0.1.0"}async openExternal(e){window.open(e,"_blank")}async showMessageBox(e){return{response:0}}}let o=a.getInstance()},1454:(e,r,t)=>{t.d(r,{v:()=>s});var a=t(7620),o=t(1119);function s(){let[e,r]=(0,a.useState)(()=>{{let e=localStorage.getItem("prg-currentSong");return e?JSON.parse(e):null}}),[t,s]=(0,a.useState)("osu"),[n,i]=(0,a.useState)(()=>localStorage.getItem("prg-gameState")||"idle");(0,a.useEffect)(()=>{console.log("\uD83C\uDFAE DEBUG: gameState changed to:",n),localStorage.setItem("prg-gameState",n)},[n]),(0,a.useEffect)(()=>{e?localStorage.setItem("prg-currentSong",JSON.stringify(e)):localStorage.removeItem("prg-currentSong")},[e]);let[l,c]=(0,a.useState)({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}}),g=(0,a.useRef)(0),u="playing"===n,d=(0,a.useCallback)(async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{i("loading");try{await o.a.stopGame(),console.log("\uD83D\uDED1 Stopped existing game session")}catch(e){console.log("ℹ️ No existing game to stop:",e)}console.log("\uD83C\uDFAE Starting pin game with song:",e.title,"(ID:",e.id,")");let t={chartId:e.id,difficulty:"Normal",gameMode:"osu",mods:[]};console.log("\uD83C\uDFAE Starting game with new API params:",t);let a=await o.a.startGame(t);return console.log("\uD83C\uDFAE Pin game session started:",a),console.log("\uD83C\uDFAE Setting currentSong and gameState to playing"),r(e),s("pin"),i("playing"),console.log('\uD83C\uDFAE GameState should now be "playing"'),setTimeout(()=>{console.log('\uD83C\uDFAE TIMEOUT CHECK: gameState after 100ms should be "playing"')},100),g.current=Date.now(),y(),!0}catch(e){return console.error("❌ Game start failed:",e),i("idle"),!1}},[]),m=(0,a.useCallback)(async()=>{try{"playing"===n||"paused"===n?await o.a.stopGame():console.log("\uD83D\uDED1 No game running, skipping stop command"),i("idle"),r(null),localStorage.removeItem("prg-gameState"),localStorage.removeItem("prg-currentSong")}catch(e){console.log("ℹ️ Stop game error (may be expected):",e),i("idle"),r(null),localStorage.removeItem("prg-gameState"),localStorage.removeItem("prg-currentSong")}},[n]),h=(0,a.useCallback)(async()=>{try{var e,r;(null==(r=window.electronAPI)||null==(e=r.game)?void 0:e.pause)&&(await window.electronAPI.game.pause(),i("paused"))}catch(e){console.error("❌ Failed to pause game:",e)}},[]),f=(0,a.useCallback)(async()=>{try{var e,r;(null==(r=window.electronAPI)||null==(e=r.game)?void 0:e.resume)&&(await window.electronAPI.game.resume(),i("playing"))}catch(e){console.error("❌ Failed to resume game:",e)}},[]),p=(0,a.useCallback)(e=>{c(r=>({...r,...e}))},[]),w=(0,a.useCallback)(async()=>{if(!e)return!1;try{var r;let t={songId:e.id,score:l.score,accuracy:l.accuracy,combo:l.combo,rank:(r=l.accuracy)>=97?"SS":r>=90?"S":r>=80?"A":r>=70?"B":r>=60?"C":r>=50?"D":"F",timestamp:Date.now()};return console.log("\uD83D\uDCCA Score submission (TODO):",t),!0}catch(e){return console.error("❌ Failed to submit score:",e),!1}},[e,l]),y=(0,a.useCallback)(()=>{c({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}})},[]);return{currentSong:e,gameMode:t,gameState:n,stats:l,isPlaying:u,startGame:d,stopGame:m,pauseGame:h,resumeGame:f,updateStats:p,submitScore:w,resetStats:y}}},2695:(e,r,t)=>{t.d(r,{a:()=>o});var a=t(7620);function o(){let[e,r]=(0,a.useState)([]),[t,o]=(0,a.useState)(!0),[s,n]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1),c=(0,a.useCallback)(async()=>{console.log("\uD83D\uDD04 refreshLibrary called");try{var e,t,a,s;o(!0),n(null),console.log("\uD83D\uDD0D Checking window.electronAPI:",{hasWindow:!0,hasElectronAPI:!!window.electronAPI,hasCharts:!!(null==(e=window.electronAPI)?void 0:e.charts),hasOsz:!!(null==(t=window.electronAPI)?void 0:t.osz),apis:window.electronAPI?Object.keys(window.electronAPI):"undefined"});let i=[];if(window.electronAPI){let e=window.electronAPI,r=null;if(null==(a=e.charts)?void 0:a.getLibrary){console.log("\uD83D\uDCDE Calling electronAPI.charts.getLibrary()");try{let t=await e.charts.getLibrary();console.log("\uD83D\uDCE8 Charts API Response:",t),t&&t.success&&Array.isArray(t.charts)?r=t.charts:Array.isArray(t)&&(r=t)}catch(e){console.warn("⚠️ Charts API failed:",e)}}if(!r&&(null==(s=e.osz)?void 0:s.getLibrary)){console.log("\uD83D\uDCDE Fallback to electronAPI.osz.getLibrary()");try{let t=await e.osz.getLibrary();console.log("\uD83D\uDCE8 OSZ API Response:",t),t&&t.success&&Array.isArray(t.charts)?r=t.charts:Array.isArray(t)&&(r=t)}catch(e){console.warn("⚠️ OSZ API failed:",e)}}r&&Array.isArray(r)&&(console.log("✅ Found ".concat(r.length," real charts")),i=r.map(e=>{let r={easy:1,normal:3,hard:5,expert:7};if(e.difficulties&&Array.isArray(e.difficulties)){let t=e.difficulties;if(t.length>0){let e=t.reduce((e,r)=>e+(r.overallDifficulty||5),0)/t.length,a=Math.round(e);r={easy:Math.max(1,a-2),normal:a,hard:Math.min(10,a+2),expert:Math.min(10,a+4)}}}return{id:e.id,title:e.title,artist:e.artist,audioFile:e.audioFilename||e.audioPath||e.audioFile||"",backgroundImage:e.backgroundFilename||e.backgroundImage||"",difficulty:r,bpm:e.bpm||120,duration:e.duration||18e4,filePath:e.filePath||"",notes:e.notes||[]}}))}r(i),l(!1),i.length>0?(console.log("✅ Using ".concat(i.length," real songs with actual OSZ data")),console.log("\uD83D\uDCCA Sample song:",i[0])):(console.warn("⚠️ No real songs found"),n("곡 라이브러리가 비어있습니다. OSZ 파일을 확인해주세요."))}catch(e){console.error("\uD83D\uDCA5 Failed to load song library:",e),n("곡 라이브러리를 불러오는 데 실패했습니다"),r([])}finally{o(!1)}},[]),g=(0,a.useCallback)(async e=>{try{var r;if(n(null),null==(r=window.electronAPI)||!r.osz)return n("Electron IPC를 사용할 수 없습니다"),!1;{let r=await window.electronAPI.osz.importFromPath(e);if(r.success)return await c(),!0;return n(r.error||"OSZ 파일 가져오기에 실패했습니다"),!1}}catch(e){return console.error("Failed to import OSZ:",e),n("OSZ 파일 가져오기 중 오류가 발생했습니다"),!1}},[c]),u=(0,a.useCallback)(async e=>{try{var r;if(n(null),null==(r=window.electronAPI)||!r.osz)return n("Electron IPC를 사용할 수 없습니다"),!1;{let r=await e.arrayBuffer(),t=new Uint8Array(r),a=await window.electronAPI.osz.importFromBuffer({name:e.name,buffer:t});if(a.success)return await c(),!0;return n(a.error||"OSZ 파일 가져오기에 실패했습니다"),!1}}catch(e){return console.error("Failed to import file:",e),n("파일 가져오기 중 오류가 발생했습니다"),!1}},[c]),d=(0,a.useCallback)(r=>e.find(e=>e.id===r),[e]);return(0,a.useEffect)(()=>{c()},[c]),{songs:e,loading:t,error:s,refreshLibrary:c,importOsz:g,getSong:d,importFromFile:u,hasDummyData:i}}},5239:(e,r,t)=>{t.d(r,{BT:()=>c,Wu:()=>g,ZB:()=>l,Zp:()=>n,aR:()=>i});var a=t(4568),o=t(7620),s=t(826);let n=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...o})});n.displayName="Card";let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",t),...o})});i.displayName="CardHeader";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("h3",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",t),...o})});l.displayName="CardTitle";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",t),...o})});c.displayName="CardDescription";let g=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",t),...o})});g.displayName="CardContent",o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",t),...o})}).displayName="CardFooter"},6845:(e,r,t)=>{t.d(r,{$:()=>c});var a=t(4568),o=t(7620),s=t(6118),n=t(4616),i=t(826);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",game:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-game hover:shadow-game/80 transform hover:scale-105 transition-all duration-200",perfect:"bg-game-perfect text-white shadow-lg hover:bg-game-perfect/90 animate-pulse-game",great:"bg-game-great text-white shadow-lg hover:bg-game-great/90",good:"bg-game-good text-white shadow-lg hover:bg-game-good/90",miss:"bg-game-miss text-white shadow-lg hover:bg-game-miss/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-9 w-9",game:"h-12 px-6 py-3 text-base font-semibold"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,r)=>{let{className:t,variant:o,size:n,asChild:c=!1,...g}=e,u=c?s.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:o,size:n,className:t})),ref:r,...g})});c.displayName="Button"}}]);