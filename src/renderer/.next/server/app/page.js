(()=>{var a={};a.id=974,a.ids=[974],a.modules={178:(a,b,c)=>{Promise.resolve().then(c.bind(c,1208))},261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},790:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>c2});var d,e,f,g=c(8157),h=c(1768);let i=()=>(0,g.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,g.jsx)("div",{className:"absolute top-0 left-0 w-72 h-72 bg-theme-secondary rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),(0,g.jsx)("div",{className:"absolute top-0 right-0 w-72 h-72 bg-theme-accent rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),(0,g.jsx)("div",{className:"absolute bottom-0 left-1/4 w-72 h-72 bg-theme-primary rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),j=()=>(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("h1",{className:"text-8xl md:text-9xl font-black mb-4 bg-clip-text text-transparent bg-gradient-to-r from-theme-secondary to-theme-accent animate-pulse",children:"PRG"}),(0,g.jsx)("p",{className:"text-xl md:text-2xl text-theme-text-light/80 mb-12 font-light",children:"A RHYTHM GAME EXPERIENCE"})]}),k=[{label:"Start Game",scene:"Select"},{label:".osz Import",scene:"OszImport"},{label:"Settings",scene:"Settings"}],l=({onNavigate:a})=>(0,g.jsxs)("div",{className:"min-h-screen bg-theme-bg text-theme-text-light flex flex-col items-center justify-center p-8 overflow-hidden relative",children:[(0,g.jsx)(i,{}),(0,g.jsxs)("div",{className:"relative z-10 flex flex-col items-center justify-center",children:[(0,g.jsx)(j,{}),(0,g.jsx)("div",{className:"space-y-6",children:k.map((b,c)=>(0,g.jsx)("button",{onClick:()=>a(b.scene),className:"group relative px-12 py-4 bg-theme-primary text-theme-text-light rounded-lg hover:bg-theme-primary/80 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl",children:b.label},c))})]})]});class m{static async loadAudio(a){try{let b=window.electron,c=await b.loadAsset(a),d=new Blob([c],{type:"audio/ogg"});return URL.createObjectURL(d)}catch(b){throw console.error(`Failed to load audio asset: ${a}`,b),Error(`Failed to load audio: ${a}`)}}static async loadImage(a){try{let b=window.electron,c=await b.loadAsset(a),d=new Blob([c],{type:"image/png"});return URL.createObjectURL(d)}catch(b){throw console.error(`Failed to load image asset: ${a}`,b),Error(`Failed to load image: ${a}`)}}static async exists(a){try{let b=window.electron;return await b.assetExists(a)}catch(b){return console.error(`Failed to check asset existence: ${a}`,b),!1}}static cleanup(a){a.startsWith("blob:")&&URL.revokeObjectURL(a)}}let n=({bannerPath:a,title:b})=>{let[c,d]=(0,h.useState)(null),[e,f]=(0,h.useState)(!0),[i,j]=(0,h.useState)(null);return((0,h.useEffect)(()=>((async()=>{try{f(!0),j(null);let b=a.replace("/assets/",""),c=await m.loadImage(b);d(c)}catch(b){console.error(`Failed to load banner image: ${a}`,b),j("Failed to load image")}finally{f(!1)}})(),()=>{c&&m.cleanup(c)}),[a]),e)?(0,g.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:(0,g.jsx)("div",{className:"text-white",children:"Loading..."})}):i||!c?(0,g.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-800",children:(0,g.jsx)("div",{className:"text-white/70",children:"No Image"})}):(0,g.jsx)("img",{src:c,alt:b,className:"w-full h-full object-cover"})},o=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},p=a=>{let b=(a=>a?o(a):o)(a),c=a=>(function(a,b=a=>a){let c=h.useSyncExternalStore(a.subscribe,h.useCallback(()=>b(a.getState()),[a,b]),h.useCallback(()=>b(a.getInitialState()),[a,b]));return h.useDebugValue(c),c})(b,a);return Object.assign(c,b),c},q={score:0,combo:0,maxCombo:0,judgment:null,judgments:{KOOL:0,COOL:0,GOOD:0,MISS:0},currentScene:"Start",isPaused:!1,charts:[],selectedChartId:null,gameMode:"pin"},r=(a=>a?p(a):p)()((a,b)=>({...q,updateGame:c=>{let{combo:d,judgment:e}=c,f={...b().judgments};e&&e in f&&f[e]++,a(a=>({...c,maxCombo:Math.max(a.maxCombo,d??a.combo),judgments:f}))},setCurrentScene:b=>a({currentScene:b}),togglePause:()=>a(a=>({isPaused:!a.isPaused})),setSelectedChart:b=>a({selectedChartId:b}),setGameMode:b=>a({gameMode:b}),loadCharts:async()=>{if(b().charts.length>0)return;let c=await window.electron.discoverCharts();a({charts:c,selectedChartId:c[0]?.id??null})},reset:()=>a(q)})),s=()=>(0,g.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,g.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-theme-secondary/10 rounded-full blur-3xl animate-pulse"}),(0,g.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-theme-primary/10 rounded-full blur-3xl animate-pulse delay-1000"}),(0,g.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-theme-accent/5 rounded-full blur-3xl animate-pulse delay-500"})]}),t=({onBack:a,onStartGame:b})=>{let{charts:c,selectedChartId:d,setSelectedChart:e,setCurrentScene:f,loadCharts:i}=r(),[j,k]=(0,h.useState)(0),[l,m]=(0,h.useState)([]),[o,p]=(0,h.useState)(!1);(0,h.useEffect)(()=>{(async()=>{try{p(!0),console.log("[SelectScene] Starting auto-import of OSZ files...");let a=await window.electron.importAllOszFiles();a.imported>0?(console.log(`[SelectScene] Auto-imported ${a.imported} new charts`),await i()):a.skipped>0&&console.log(`[SelectScene] ${a.skipped} charts already existed`),a.errors.length>0&&console.warn("[SelectScene] Some charts failed to import:",a.errors)}catch(a){console.error("[SelectScene] Failed to auto-import OSZ files:",a)}finally{p(!1)}})().then(()=>{o||i()})},[]);let q=c.find(a=>a.id===d);(0,h.useEffect)(()=>{if(console.log("[DIFFICULTY DEBUG] Selected chart:",q),console.log("[DIFFICULTY DEBUG] Chart path:",q?.chartPath),console.log("[DIFFICULTY DEBUG] Full chart object:",JSON.stringify(q,null,2)),q){let a=q.oszMetadata?.difficulties||q.difficulties;if(console.log("[DIFFICULTY DEBUG] Chart difficulties:",a),a&&a.length>1){let b=a.map(a=>a.name||`Difficulty ${a.index+1}`);console.log("[DIFFICULTY DEBUG] Setting difficulties:",b),m(b),k(0)}else console.log("[DIFFICULTY DEBUG] No multiple difficulties found, clearing array"),m([]),k(0)}else console.log("[DIFFICULTY DEBUG] No chart selected, clearing difficulties"),m([]),k(0)},[q]);let t=async()=>{if(q)try{let a;(a=q.chartPath.endsWith(".osz")?await window.electron.convertOszToPinChart(q,j):await window.electron.loadPinChart(q.chartPath))&&b(a)}catch(a){console.error("Failed to load chart:",a)}};return(0,g.jsxs)("div",{className:"min-h-screen cyber-bg-animated flex flex-col items-center justify-center p-4 text-white",children:[(0,g.jsx)(s,{}),(0,g.jsxs)("div",{className:"w-full max-w-7xl h-[85vh] game-card flex p-6 z-10 gap-6",children:[(0,g.jsxs)("div",{className:"w-1/3 flex flex-col",children:[(0,g.jsxs)("h2",{className:"text-3xl font-black mb-4 neon-glow-cyan",style:{color:"var(--neon-cyan)"},children:["SELECT MUSIC",o&&(0,g.jsx)("span",{className:"text-sm font-normal text-yellow-400 ml-3",children:"(Importing OSZ files...)"})]}),(0,g.jsx)("div",{className:"flex-1 overflow-y-auto pr-2 space-y-2 max-h-[calc(85vh-120px)]",children:o&&0===c.length?(0,g.jsxs)("div",{className:"text-center py-8",children:[(0,g.jsx)("p",{className:"text-gray-400",children:"Loading charts..."}),(0,g.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400 mx-auto mt-4"})]}):c.map(a=>(0,g.jsxs)("button",{onClick:()=>e(a.id),className:`w-full text-left p-4 rounded-lg transition-all duration-300 transform hover:scale-102 ${d===a.id?"neon-glow-magenta border-2":"bg-white/10 hover:bg-white/20 border border-transparent hover:border-cyan-400"}`,style:{backgroundColor:d===a.id?"rgba(255, 0, 255, 0.2)":void 0,borderColor:d===a.id?"var(--neon-magenta)":void 0},children:[(0,g.jsx)("p",{className:"font-bold text-lg truncate",style:{color:d===a.id?"var(--neon-magenta)":"white"},children:a.title}),(0,g.jsx)("p",{className:"text-sm text-gray-400 truncate",children:a.artist})]},a.id))})]}),(0,g.jsxs)("div",{className:"w-2/3 flex flex-col justify-between",children:[q?(0,g.jsxs)("div",{className:"flex-grow flex flex-col items-center justify-center text-center px-4",children:[(0,g.jsx)("div",{className:"relative w-full max-w-lg h-48 rounded-xl shadow-2xl mb-6 border-2 neon-glow-green overflow-hidden",style:{borderColor:"var(--neon-green)"},children:(0,g.jsx)(n,{bannerPath:q.bannerPath||"",title:q.title})}),(0,g.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight mb-2 neon-glow-pulse",style:{color:"var(--neon-cyan)"},children:q.title}),(0,g.jsx)("p",{className:"text-xl text-gray-300 mb-6",style:{color:"var(--neon-yellow)"},children:q.artist}),l.length>1&&(0,g.jsxs)("div",{className:"w-full max-w-md",children:[(0,g.jsx)("h3",{className:"text-xl font-bold mb-4 neon-glow-green",style:{color:"var(--neon-green)"},children:"Select Difficulty"}),(0,g.jsx)("div",{className:"max-h-32 overflow-y-auto space-y-2 p-2 rounded-lg bg-black/20",children:l.map((a,b)=>(0,g.jsx)("button",{onClick:()=>k(b),className:`w-full px-4 py-2 rounded-lg text-left transition-all duration-300 transform hover:scale-105 ${j===b?"neon-glow-yellow font-bold":"bg-white/10 hover:bg-white/20 text-white hover:neon-glow-cyan"}`,style:{backgroundColor:j===b?"rgba(255, 255, 0, 0.2)":void 0,color:j===b?"var(--neon-yellow)":void 0},children:a},b))})]})]}):(0,g.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,g.jsx)("p",{className:"text-2xl text-gray-400",children:"Select a song to begin"})}),(0,g.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,g.jsx)("button",{onClick:a,className:"game-button",style:{borderColor:"var(--neon-red)",boxShadow:"0 0 10px var(--neon-red)"},children:"â† Back to Menu"}),(0,g.jsx)("button",{onClick:t,disabled:!q,className:`px-12 py-4 text-2xl font-bold rounded-lg transition-all duration-300 transform ${q?"game-button hover:scale-105 neon-glow-pulse":"bg-gray-600 cursor-not-allowed text-gray-400"}`,style:q?{borderColor:"var(--neon-green)",boxShadow:"0 0 20px var(--neon-green)",color:"var(--neon-green)"}:{},children:"GAME START"})]})]})]})]})};var u=c(7194),v=c.n(u);let w=({radius:a,scale:b,opacity:c})=>{let d=2*a*b;return(0,g.jsx)("div",{className:"absolute rounded-full border-4 border-white/80 pointer-events-none",style:{width:`${d}px`,height:`${d}px`,left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:c,boxShadow:"0 0 16px rgba(255,255,255,0.35)",transition:"all 0.1s linear",borderColor:b>1.2?"rgba(255, 255, 255, 0.4)":b>1.05?"rgba(255, 255, 255, 0.6)":"rgba(255, 255, 255, 0.9)"}})};var x=N(),y=a=>J(a,x),z=N();y.write=a=>J(a,z);var A=N();y.onStart=a=>J(a,A);var B=N();y.onFrame=a=>J(a,B);var C=N();y.onFinish=a=>J(a,C);var D=[];y.setTimeout=(a,b)=>{let c=y.now()+b,d=()=>{let a=D.findIndex(a=>a.cancel==d);~a&&D.splice(a,1),H-=!!~a},e={time:c,handler:a,cancel:d};return D.splice(E(c),0,e),H+=1,K(),e};var E=a=>~(~D.findIndex(b=>b.time>a)||~D.length);y.cancel=a=>{A.delete(a),B.delete(a),C.delete(a),x.delete(a),z.delete(a)},y.sync=a=>{I=!0,y.batchedUpdates(a),I=!1},y.throttle=a=>{let b;function c(){try{a(...b)}finally{b=null}}function d(...a){b=a,y.onStart(c)}return d.handler=a,d.cancel=()=>{A.delete(c),b=null},d};var F="undefined"!=typeof window?window.requestAnimationFrame:()=>{};y.use=a=>F=a,y.now="undefined"!=typeof performance?()=>performance.now():Date.now,y.batchedUpdates=a=>a(),y.catch=console.error,y.frameLoop="always",y.advance=()=>{"demand"!==y.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):M()};var G=-1,H=0,I=!1;function J(a,b){I?(b.delete(a),a(0)):(b.add(a),K())}function K(){G<0&&(G=0,"demand"!==y.frameLoop&&F(L))}function L(){~G&&(F(L),y.batchedUpdates(M))}function M(){let a=G,b=E(G=y.now());if(b&&(O(D.splice(0,b),a=>a.handler()),H-=b),!H)return void(G=-1);A.flush(),x.flush(a?Math.min(64,G-a):16.667),B.flush(),z.flush(),C.flush()}function N(){let a=new Set,b=a;return{add(c){H+=+!(b!=a||a.has(c)),a.add(c)},delete:c=>(H-=b==a&&a.has(c)?1:0,a.delete(c)),flush(c){b.size&&(a=new Set,H-=b.size,O(b,b=>b(c)&&a.add(b)),H+=a.size,b=a)}}}function O(a,b){a.forEach(a=>{try{b(a)}catch(a){y.catch(a)}})}var P=Object.defineProperty,Q={};function R(){}((a,b)=>{for(var c in b)P(a,c,{get:b[c],enumerable:!0})})(Q,{assign:()=>ab,colors:()=>$,createStringInterpolator:()=>d,skipAnimation:()=>_,to:()=>e,willAdvance:()=>aa});var S={arr:Array.isArray,obj:a=>!!a&&"Object"===a.constructor.name,fun:a=>"function"==typeof a,str:a=>"string"==typeof a,num:a=>"number"==typeof a,und:a=>void 0===a};function T(a,b){if(S.arr(a)){if(!S.arr(b)||a.length!==b.length)return!1;for(let c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return a===b}var U=(a,b)=>a.forEach(b);function V(a,b,c){if(S.arr(a)){for(let d=0;d<a.length;d++)b.call(c,a[d],`${d}`);return}for(let d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d)}var W=a=>S.und(a)?[]:S.arr(a)?a:[a];function X(a,b){if(a.size){let c=Array.from(a);a.clear(),U(c,b)}}var Y=(a,...b)=>X(a,a=>a(...b)),Z=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),$=null,_=!1,aa=R,ab=a=>{a.to&&(e=a.to),a.now&&(y.now=a.now),void 0!==a.colors&&($=a.colors),null!=a.skipAnimation&&(_=a.skipAnimation),a.createStringInterpolator&&(d=a.createStringInterpolator),a.requestAnimationFrame&&y.use(a.requestAnimationFrame),a.batchedUpdates&&(y.batchedUpdates=a.batchedUpdates),a.willAdvance&&(aa=a.willAdvance),a.frameLoop&&(y.frameLoop=a.frameLoop)},ac=new Set,ad=[],ae=[],af=0,ag={get idle(){return!ac.size&&!ad.length},start(a){af>a.priority?(ac.add(a),y.onStart(ah)):(ai(a),y(ak))},advance:ak,sort(a){if(af)y.onFrame(()=>ag.sort(a));else{let b=ad.indexOf(a);~b&&(ad.splice(b,1),aj(a))}},clear(){ad=[],ac.clear()}};function ah(){ac.forEach(ai),ac.clear(),y(ak)}function ai(a){ad.includes(a)||aj(a)}function aj(a){ad.splice(function(a,b){let c=a.findIndex(b);return c<0?a.length:c}(ad,b=>b.priority>a.priority),0,a)}function ak(a){let b=ae;for(let c=0;c<ad.length;c++){let d=ad[c];af=d.priority,!d.idle&&(aa(d),d.advance(a),d.idle||b.push(d))}return af=0,(ae=ad).length=0,(ad=b).length>0}var al="[-+]?\\d*\\.?\\d+",am=al+"%";function an(...a){return"\\(\\s*("+a.join(")\\s*,\\s*(")+")\\s*\\)"}var ao=RegExp("rgb"+an(al,al,al)),ap=RegExp("rgba"+an(al,al,al,al)),aq=RegExp("hsl"+an(al,am,am)),ar=RegExp("hsla"+an(al,am,am,al)),as=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,at=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,au=/^#([0-9a-fA-F]{6})$/,av=/^#([0-9a-fA-F]{8})$/;function aw(a,b,c){return(c<0&&(c+=1),c>1&&(c-=1),c<1/6)?a+(b-a)*6*c:c<.5?b:c<2/3?a+(b-a)*(2/3-c)*6:a}function ax(a,b,c){let d=c<.5?c*(1+b):c+b-c*b,e=2*c-d,f=aw(e,d,a+1/3);return Math.round(255*f)<<24|Math.round(255*aw(e,d,a))<<16|Math.round(255*aw(e,d,a-1/3))<<8}function ay(a){let b=parseInt(a,10);return b<0?0:b>255?255:b}function az(a){return(parseFloat(a)%360+360)%360/360}function aA(a){let b=parseFloat(a);return b<0?0:b>1?255:Math.round(255*b)}function aB(a){let b=parseFloat(a);return b<0?0:b>100?1:b/100}function aC(a){let b,c="number"==typeof a?a>>>0===a&&a>=0&&a<=0xffffffff?a:null:(b=au.exec(a))?parseInt(b[1]+"ff",16)>>>0:$&&void 0!==$[a]?$[a]:(b=ao.exec(a))?(ay(b[1])<<24|ay(b[2])<<16|ay(b[3])<<8|255)>>>0:(b=ap.exec(a))?(ay(b[1])<<24|ay(b[2])<<16|ay(b[3])<<8|aA(b[4]))>>>0:(b=as.exec(a))?parseInt(b[1]+b[1]+b[2]+b[2]+b[3]+b[3]+"ff",16)>>>0:(b=av.exec(a))?parseInt(b[1],16)>>>0:(b=at.exec(a))?parseInt(b[1]+b[1]+b[2]+b[2]+b[3]+b[3]+b[4]+b[4],16)>>>0:(b=aq.exec(a))?(255|ax(az(b[1]),aB(b[2]),aB(b[3])))>>>0:(b=ar.exec(a))?(ax(az(b[1]),aB(b[2]),aB(b[3]))|aA(b[4]))>>>0:null;if(null===c)return a;let d=(0xff000000&(c=c||0))>>>24,e=(0xff0000&c)>>>16,f=(65280&c)>>>8,g=(255&c)/255;return`rgba(${d}, ${e}, ${f}, ${g})`}var aD=(a,b,c)=>{if(S.fun(a))return a;if(S.arr(a))return aD({range:a,output:b,extrapolate:c});if(S.str(a.output[0]))return d(a);let e=a.output,f=a.range||[0,1],g=a.extrapolateLeft||a.extrapolate||"extend",h=a.extrapolateRight||a.extrapolate||"extend",i=a.easing||(a=>a);return b=>{let c=function(a,b){for(var c=1;c<b.length-1&&!(b[c]>=a);++c);return c-1}(b,f);return function(a,b,c,d,e,f,g,h,i){let j=i?i(a):a;if(j<b)if("identity"===g)return j;else"clamp"===g&&(j=b);if(j>c)if("identity"===h)return j;else"clamp"===h&&(j=c);return d===e?d:b===c?a<=b?d:e:(b===-1/0?j=-j:c===1/0?j-=b:j=(j-b)/(c-b),j=f(j),d===-1/0?j=-j:e===1/0?j+=d:j=j*(e-d)+d,j)}(b,f[c],f[c+1],e[c],e[c+1],i,g,h,a.map)}},aE=Symbol.for("FluidValue.get"),aF=Symbol.for("FluidValue.observers"),aG=a=>!!(a&&a[aE]),aH=a=>a&&a[aE]?a[aE]():a,aI=a=>a[aF]||null;function aJ(a,b){let c=a[aF];c&&c.forEach(a=>{a.eventObserved?a.eventObserved(b):a(b)})}var aK=class{constructor(a){if(!a&&!(a=this.get))throw Error("Unknown getter");aL(this,a)}},aL=(a,b)=>aO(a,aE,b);function aM(a,b){if(a[aE]){let c=a[aF];c||aO(a,aF,c=new Set),!c.has(b)&&(c.add(b),a.observerAdded&&a.observerAdded(c.size,b))}return b}function aN(a,b){let c=a[aF];if(c&&c.has(b)){let d=c.size-1;d?c.delete(b):a[aF]=null,a.observerRemoved&&a.observerRemoved(d,b)}}var aO=(a,b,c)=>Object.defineProperty(a,b,{value:c,writable:!0,configurable:!0}),aP=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,aQ=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,aR=RegExp(`(${aP.source})(%|[a-z]+)`,"i"),aS=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,aT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,aU=a=>{let[b,c]=aV(a);if(!b||Z())return a;let d=window.getComputedStyle(document.documentElement).getPropertyValue(b);if(d)return d.trim();if(c&&c.startsWith("--")){let a=window.getComputedStyle(document.documentElement).getPropertyValue(c);if(a)return a}else if(c&&aT.test(c))return aU(c);else if(c)return c;return a},aV=a=>{let b=aT.exec(a);if(!b)return[,];let[,c,d]=b;return[c,d]},aW=(a,b,c,d,e)=>`rgba(${Math.round(b)}, ${Math.round(c)}, ${Math.round(d)}, ${e})`,aX=a=>{f||(f=$?RegExp(`(${Object.keys($).join("|")})(?!\\w)`,"g"):/^\b$/);let b=a.output.map(a=>aH(a).replace(aT,aU).replace(aQ,aC).replace(f,aC)),c=b.map(a=>a.match(aP).map(Number)),d=c[0].map((a,b)=>c.map(a=>{if(!(b in a))throw Error('The arity of each "output" value must be equal');return a[b]})).map(b=>aD({...a,output:b}));return a=>{let c=!aR.test(b[0])&&b.find(a=>aR.test(a))?.replace(aP,""),e=0;return b[0].replace(aP,()=>`${d[e++](a)}${c||""}`).replace(aS,aW)}},aY="react-spring: ",aZ=a=>{let b=!1;if("function"!=typeof a)throw TypeError(`${aY}once requires a function parameter`);return(...c)=>{b||(a(...c),b=!0)}},a$=aZ(console.warn),a_=aZ(console.warn);function a0(a){return S.str(a)&&("#"==a[0]||/\d/.test(a)||!Z()&&aT.test(a)||a in($||{}))}var a1=Z()?h.useEffect:h.useLayoutEffect;function a2(){let a=(0,h.useState)()[1],b=(()=>{let a=(0,h.useRef)(!1);return a1(()=>(a.current=!0,()=>{a.current=!1}),[]),a})();return()=>{b.current&&a(Math.random())}}var a3=a=>(0,h.useEffect)(a,a4),a4=[];function a5(a){let b=(0,h.useRef)(void 0);return(0,h.useEffect)(()=>{b.current=a}),b.current}var a6=Symbol.for("Animated:node"),a7=a=>a&&a[a6],a8=(a,b)=>Object.defineProperty(a,a6,{value:b,writable:!0,configurable:!0}),a9=a=>a&&a[a6]&&a[a6].getPayload(),ba=class{constructor(){a8(this,this)}getPayload(){return this.payload||[]}},bb=class a extends ba{constructor(a){super(),this._value=a,this.done=!0,this.durationProgress=0,S.num(this._value)&&(this.lastPosition=this._value)}static create(b){return new a(b)}getPayload(){return[this]}getValue(){return this._value}setValue(a,b){return S.num(a)&&(this.lastPosition=a,b&&(a=Math.round(a/b)*b,this.done&&(this.lastPosition=a))),this._value!==a&&(this._value=a,!0)}reset(){let{done:a}=this;this.done=!1,S.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,a&&(this.lastVelocity=null),this.v0=null)}},bc=class a extends bb{constructor(a){super(0),this._string=null,this._toString=aD({output:[a,a]})}static create(b){return new a(b)}getValue(){let a=this._string;return null==a?this._string=this._toString(this._value):a}setValue(a){if(S.str(a)){if(a==this._string)return!1;this._string=a,this._value=1}else{if(!super.setValue(a))return!1;this._string=null}return!0}reset(a){a&&(this._toString=aD({output:[this.getValue(),a]})),this._value=0,super.reset()}},bd={dependencies:null},be=class extends ba{constructor(a){super(),this.source=a,this.setValue(a)}getValue(a){let b={};return V(this.source,(c,d)=>{c&&c[a6]===c?b[d]=c.getValue(a):aG(c)?b[d]=aH(c):a||(b[d]=c)}),b}setValue(a){this.source=a,this.payload=this._makePayload(a)}reset(){this.payload&&U(this.payload,a=>a.reset())}_makePayload(a){if(a){let b=new Set;return V(a,this._addToPayload,b),Array.from(b)}}_addToPayload(a){bd.dependencies&&aG(a)&&bd.dependencies.add(a);let b=a9(a);b&&U(b,a=>this.add(a))}},bf=class a extends be{constructor(a){super(a)}static create(b){return new a(b)}getValue(){return this.source.map(a=>a.getValue())}setValue(a){let b=this.getPayload();return a.length==b.length?b.map((b,c)=>b.setValue(a[c])).some(Boolean):(super.setValue(a.map(bg)),!0)}};function bg(a){return(a0(a)?bc:bb).create(a)}function bh(a){let b=a7(a);return b?b.constructor:S.arr(a)?bf:a0(a)?bc:bb}var bi=(a,b)=>{let c=!S.fun(a)||a.prototype&&a.prototype.isReactComponent;return(0,h.forwardRef)((d,e)=>{let f=(0,h.useRef)(null),g=c&&(0,h.useCallback)(a=>{f.current=function(a,b){return a&&(S.fun(a)?a(b):a.current=b),b}(e,a)},[e]),[i,j]=function(a,b){let c=new Set;return bd.dependencies=c,a.style&&(a={...a,style:b.createAnimatedStyle(a.style)}),a=new be(a),bd.dependencies=null,[a,c]}(d,b),k=a2(),l=()=>{let a=f.current;(!c||a)&&!1===(!!a&&b.applyAnimatedValues(a,i.getValue(!0)))&&k()},m=new bj(l,j),n=(0,h.useRef)(void 0);a1(()=>(n.current=m,U(j,a=>aM(a,m)),()=>{n.current&&(U(n.current.deps,a=>aN(a,n.current)),y.cancel(n.current.update))})),(0,h.useEffect)(l,[]),a3(()=>()=>{let a=n.current;U(a.deps,b=>aN(b,a))});let o=b.getComponentProps(i.getValue());return h.createElement(a,{...o,ref:g})})},bj=class{constructor(a,b){this.update=a,this.deps=b}eventObserved(a){"change"==a.type&&y.write(this.update)}},bk=Symbol.for("AnimatedComponent"),bl=a=>S.str(a)?a:a&&S.str(a.displayName)?a.displayName:S.fun(a)&&a.name||null;function bm(a,...b){return S.fun(a)?a(...b):a}var bn=(a,b)=>!0===a||!!(b&&a&&(S.fun(a)?a(b):W(a).includes(b))),bo=(a,b)=>S.obj(a)?b&&a[b]:a,bp=(a,b)=>!0===a.default?a[b]:a.default?a.default[b]:void 0,bq=a=>a,br=(a,b=bq)=>{let c=bs;a.default&&!0!==a.default&&(c=Object.keys(a=a.default));let d={};for(let e of c){let c=b(a[e],e);S.und(c)||(d[e]=c)}return d},bs=["config","onProps","onStart","onChange","onPause","onResume","onRest"],bt={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function bu(a){let b=function(a){let b={},c=0;if(V(a,(a,d)=>{!bt[d]&&(b[d]=a,c++)}),c)return b}(a);if(b){let c={to:b};return V(a,(a,d)=>d in b||(c[d]=a)),c}return{...a}}function bv(a){return a=aH(a),S.arr(a)?a.map(bv):a0(a)?Q.createStringInterpolator({range:[0,1],output:[a,a]})(1):a}function bw(a){for(let b in a)return!0;return!1}function bx(a){return S.fun(a)||S.arr(a)&&S.obj(a[0])}function by(a,b){a.ref?.delete(a),b?.delete(a)}function bz(a,b){b&&a.ref!==b&&(a.ref?.delete(a),b.add(a),a.ref=b)}var bA={tension:170,friction:26,mass:1,damping:1,easing:a=>a,clamp:!1},bB=class{constructor(){this.velocity=0,Object.assign(this,bA)}};function bC(a,b){if(S.und(b.decay)){let c=!S.und(b.tension)||!S.und(b.friction);!c&&S.und(b.frequency)&&S.und(b.damping)&&S.und(b.mass)||(a.duration=void 0,a.decay=void 0),c&&(a.frequency=void 0)}else a.duration=void 0}var bD=[],bE=class{constructor(){this.changed=!1,this.values=bD,this.toValues=null,this.fromValues=bD,this.config=new bB,this.immediate=!1}};function bF(a,{key:b,props:c,defaultProps:d,state:e,actions:f}){return new Promise((g,h)=>{let i,j,k=bn(c.cancel??d?.cancel,b);if(k)n();else{S.und(c.pause)||(e.paused=bn(c.pause,b));let a=d?.pause;!0!==a&&(a=e.paused||bn(a,b)),i=bm(c.delay||0,b),a?(e.resumeQueue.add(m),f.pause()):(f.resume(),m())}function l(){e.resumeQueue.add(m),e.timeouts.delete(j),j.cancel(),i=j.time-y.now()}function m(){i>0&&!Q.skipAnimation?(e.delayed=!0,j=y.setTimeout(n,i),e.pauseQueue.add(l),e.timeouts.add(j)):n()}function n(){e.delayed&&(e.delayed=!1),e.pauseQueue.delete(l),e.timeouts.delete(j),a<=(e.cancelId||0)&&(k=!0);try{f.start({...c,callId:a,cancel:k},g)}catch(a){h(a)}}})}var bG=(a,b)=>1==b.length?b[0]:b.some(a=>a.cancelled)?bJ(a.get()):b.every(a=>a.noop)?bH(a.get()):bI(a.get(),b.every(a=>a.finished)),bH=a=>({value:a,noop:!0,finished:!0,cancelled:!1}),bI=(a,b,c=!1)=>({value:a,finished:b,cancelled:c}),bJ=a=>({value:a,cancelled:!0,finished:!1});function bK(a,b,c,d){let{callId:e,parentId:f,onRest:g}=b,{asyncTo:h,promise:i}=c;return f||a!==h||b.reset?c.promise=(async()=>{let j,k,l;c.asyncId=e,c.asyncTo=a;let m=br(b,(a,b)=>"onRest"===b?void 0:a),n=new Promise((a,b)=>(j=a,k=b)),o=a=>{let b=e<=(c.cancelId||0)&&bJ(d)||e!==c.asyncId&&bI(d,!1);if(b)throw a.result=b,k(a),a},p=(a,b)=>{let f=new bM,g=new bN;return(async()=>{if(Q.skipAnimation)throw bL(c),g.result=bI(d,!1),k(g),g;o(f);let h=S.obj(a)?{...a}:{...b,to:a};h.parentId=e,V(m,(a,b)=>{S.und(h[b])&&(h[b]=a)});let i=await d.start(h);return o(f),c.paused&&await new Promise(a=>{c.resumeQueue.add(a)}),i})()};if(Q.skipAnimation)return bL(c),bI(d,!1);try{let b;b=S.arr(a)?(async a=>{for(let b of a)await p(b)})(a):Promise.resolve(a(p,d.stop.bind(d))),await Promise.all([b.then(j),n]),l=bI(d.get(),!0,!1)}catch(a){if(a instanceof bM)l=a.result;else if(a instanceof bN)l=a.result;else throw a}finally{e==c.asyncId&&(c.asyncId=f,c.asyncTo=f?h:void 0,c.promise=f?i:void 0)}return S.fun(g)&&y.batchedUpdates(()=>{g(l,d,d.item)}),l})():i}function bL(a,b){X(a.timeouts,a=>a.cancel()),a.pauseQueue.clear(),a.resumeQueue.clear(),a.asyncId=a.asyncTo=a.promise=void 0,b&&(a.cancelId=b)}var bM=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},bN=class extends Error{constructor(){super("SkipAnimationSignal")}},bO=1,bP=class extends aK{constructor(){super(...arguments),this.id=bO++,this._priority=0}get priority(){return this._priority}set priority(a){this._priority!=a&&(this._priority=a,this._onPriorityChange(a))}get(){let a=a7(this);return a&&a.getValue()}to(...a){return Q.to(this,a)}interpolate(...a){return a$(`${aY}The "interpolate" function is deprecated in v9 (use "to" instead)`),Q.to(this,a)}toJSON(){return this.get()}observerAdded(a){1==a&&this._attach()}observerRemoved(a){0==a&&this._detach()}_attach(){}_detach(){}_onChange(a,b=!1){aJ(this,{type:"change",parent:this,value:a,idle:b})}_onPriorityChange(a){this.idle||ag.sort(this),aJ(this,{type:"priority",parent:this,priority:a})}},bQ=Symbol.for("SpringPhase"),bR=a=>(1&a[bQ])>0,bS=a=>(2&a[bQ])>0,bT=a=>(4&a[bQ])>0,bU=(a,b)=>b?a[bQ]|=3:a[bQ]&=-3,bV=(a,b)=>b?a[bQ]|=4:a[bQ]&=-5,bW=class extends bP{constructor(a,b){if(super(),this.animation=new bE,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!S.und(a)||!S.und(b)){let c=S.obj(a)?{...a}:{...b,from:a};S.und(c.default)&&(c.default=!0),this.start(c)}}get idle(){return!(bS(this)||this._state.asyncTo)||bT(this)}get goal(){return aH(this.animation.to)}get velocity(){let a=a7(this);return a instanceof bb?a.lastVelocity||0:a.getPayload().map(a=>a.lastVelocity||0)}get hasAnimated(){return bR(this)}get isAnimating(){return bS(this)}get isPaused(){return bT(this)}get isDelayed(){return this._state.delayed}advance(a){let b=!0,c=!1,d=this.animation,{toValues:e}=d,{config:f}=d,g=a9(d.to);!g&&aG(d.to)&&(e=W(aH(d.to))),d.values.forEach((h,i)=>{if(h.done)return;let j=h.constructor==bc?1:g?g[i].lastPosition:e[i],k=d.immediate,l=j;if(!k){let b;if(l=h.lastPosition,f.tension<=0){h.done=!0;return}let c=h.elapsedTime+=a,e=d.fromValues[i],g=null!=h.v0?h.v0:h.v0=S.arr(f.velocity)?f.velocity[i]:f.velocity,m=f.precision||(e==j?.005:Math.min(1,.001*Math.abs(j-e)));if(S.und(f.duration))if(f.decay){let a=!0===f.decay?.998:f.decay,d=Math.exp(-(1-a)*c);l=e+g/(1-a)*(1-d),k=Math.abs(h.lastPosition-l)<=m,b=g*d}else{b=null==h.lastVelocity?g:h.lastVelocity;let c=f.restVelocity||m/10,d=f.clamp?0:f.bounce,i=!S.und(d),n=e==j?h.v0>0:e<j,o=Math.ceil(a/1);for(let a=0;a<o&&!(!(Math.abs(b)>c)&&(k=Math.abs(j-l)<=m));++a){i&&(l==j||l>j==n)&&(b=-b*d,l=j);let a=(-(1e-6*f.tension)*(l-j)+-(.001*f.friction)*b)/f.mass;b+=+a,l+=+b}}else{let d=1;f.duration>0&&(this._memoizedDuration!==f.duration&&(this._memoizedDuration=f.duration,h.durationProgress>0&&(h.elapsedTime=f.duration*h.durationProgress,c=h.elapsedTime+=a)),h.durationProgress=d=(d=(f.progress||0)+c/this._memoizedDuration)>1?1:d<0?0:d),b=((l=e+f.easing(d)*(j-e))-h.lastPosition)/a,k=1==d}h.lastVelocity=b,Number.isNaN(l)&&(console.warn("Got NaN while animating:",this),k=!0)}g&&!g[i].done&&(k=!1),k?h.done=!0:b=!1,h.setValue(l,f.round)&&(c=!0)});let h=a7(this),i=h.getValue();if(b){let a=aH(d.to);(i!==a||c)&&!f.decay?(h.setValue(a),this._onChange(a)):c&&f.decay&&this._onChange(i),this._stop()}else c&&this._onChange(i)}set(a){return y.batchedUpdates(()=>{this._stop(),this._focus(a),this._set(a)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(bS(this)){let{to:a,config:b}=this.animation;y.batchedUpdates(()=>{this._onStart(),b.decay||this._set(a,!1),this._stop()})}return this}update(a){return(this.queue||(this.queue=[])).push(a),this}start(a,b){let c;return S.und(a)?(c=this.queue||[],this.queue=[]):c=[S.obj(a)?a:{...b,to:a}],Promise.all(c.map(a=>this._update(a))).then(a=>bG(this,a))}stop(a){let{to:b}=this.animation;return this._focus(this.get()),bL(this._state,a&&this._lastCallId),y.batchedUpdates(()=>this._stop(b,a)),this}reset(){this._update({reset:!0})}eventObserved(a){"change"==a.type?this._start():"priority"==a.type&&(this.priority=a.priority+1)}_prepareNode(a){let b=this.key||"",{to:c,from:d}=a;(null==(c=S.obj(c)?c[b]:c)||bx(c))&&(c=void 0),null==(d=S.obj(d)?d[b]:d)&&(d=void 0);let e={to:c,from:d};return!bR(this)&&(a.reverse&&([c,d]=[d,c]),d=aH(d),S.und(d)?a7(this)||this._set(c):this._set(d)),e}_update({...a},b){let{key:c,defaultProps:d}=this;a.default&&Object.assign(d,br(a,(a,b)=>/^on/.test(b)?bo(a,c):a)),b0(this,a,"onProps"),b1(this,"onProps",a,this);let e=this._prepareNode(a);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let f=this._state;return bF(++this._lastCallId,{key:c,props:a,defaultProps:d,state:f,actions:{pause:()=>{bT(this)||(bV(this,!0),Y(f.pauseQueue),b1(this,"onPause",bI(this,bX(this,this.animation.to)),this))},resume:()=>{bT(this)&&(bV(this,!1),bS(this)&&this._resume(),Y(f.resumeQueue),b1(this,"onResume",bI(this,bX(this,this.animation.to)),this))},start:this._merge.bind(this,e)}}).then(c=>{if(a.loop&&c.finished&&!(b&&c.noop)){let b=bY(a);if(b)return this._update(b,!0)}return c})}_merge(a,b,c){if(b.cancel)return this.stop(!0),c(bJ(this));let d=!S.und(a.to),e=!S.und(a.from);if(d||e)if(!(b.callId>this._lastToId))return c(bJ(this));else this._lastToId=b.callId;let{key:f,defaultProps:g,animation:h}=this,{to:i,from:j}=h,{to:k=i,from:l=j}=a;e&&!d&&(!b.default||S.und(k))&&(k=l),b.reverse&&([k,l]=[l,k]);let m=!T(l,j);m&&(h.from=l),l=aH(l);let n=!T(k,i);n&&this._focus(k);let o=bx(b.to),{config:p}=h,{decay:q,velocity:r}=p;(d||e)&&(p.velocity=0),b.config&&!o&&function(a,b,c){for(let d in c&&(bC(c={...c},b),b={...c,...b}),bC(a,b),Object.assign(a,b),bA)null==a[d]&&(a[d]=bA[d]);let{frequency:d,damping:e}=a,{mass:f}=a;S.und(d)||(d<.01&&(d=.01),e<0&&(e=0),a.tension=Math.pow(2*Math.PI/d,2)*f,a.friction=4*Math.PI*e*f/d)}(p,bm(b.config,f),b.config!==g.config?bm(g.config,f):void 0);let s=a7(this);if(!s||S.und(k))return c(bI(this,!0));let t=S.und(b.reset)?e&&!b.default:!S.und(l)&&bn(b.reset,f),u=t?l:this.get(),v=bv(k),w=S.num(v)||S.arr(v)||a0(v),x=!o&&(!w||bn(g.immediate||b.immediate,f));if(n){let a=bh(k);if(a!==s.constructor)if(x)s=this._set(v);else throw Error(`Cannot animate between ${s.constructor.name} and ${a.name}, as the "to" prop suggests`)}let z=s.constructor,A=aG(k),B=!1;if(!A){let a=t||!bR(this)&&m;(n||a)&&(A=!(B=T(bv(u),v))),(T(h.immediate,x)||x)&&T(p.decay,q)&&T(p.velocity,r)||(A=!0)}if(B&&bS(this)&&(h.changed&&!t?A=!0:A||this._stop(i)),!o&&((A||aG(i))&&(h.values=s.getPayload(),h.toValues=aG(k)?null:z==bc?[1]:W(v)),h.immediate!=x&&(h.immediate=x,x||t||this._set(i)),A)){let{onRest:a}=h;U(b_,a=>b0(this,b,a));let d=bI(this,bX(this,i));Y(this._pendingCalls,d),this._pendingCalls.add(c),h.changed&&y.batchedUpdates(()=>{h.changed=!t,a?.(d,this),t?bm(g.onRest,d):h.onStart?.(d,this)})}t&&this._set(u),o?c(bK(b.to,b,this._state,this)):A?this._start():bS(this)&&!n?this._pendingCalls.add(c):c(bH(u))}_focus(a){let b=this.animation;a!==b.to&&(aI(this)&&this._detach(),b.to=a,aI(this)&&this._attach())}_attach(){let a=0,{to:b}=this.animation;aG(b)&&(aM(b,this),b instanceof bP&&(a=b.priority+1)),this.priority=a}_detach(){let{to:a}=this.animation;aG(a)&&aN(a,this)}_set(a,b=!0){let c=aH(a);if(!S.und(c)){let a=a7(this);if(!a||!T(c,a.getValue())){let d=bh(c);a&&a.constructor==d?a.setValue(c):a8(this,d.create(c)),a&&y.batchedUpdates(()=>{this._onChange(c,b)})}}return a7(this)}_onStart(){let a=this.animation;a.changed||(a.changed=!0,b1(this,"onStart",bI(this,bX(this,a.to)),this))}_onChange(a,b){b||(this._onStart(),bm(this.animation.onChange,a,this)),bm(this.defaultProps.onChange,a,this),super._onChange(a,b)}_start(){let a=this.animation;a7(this).reset(aH(a.to)),a.immediate||(a.fromValues=a.values.map(a=>a.lastPosition)),!bS(this)&&(bU(this,!0),bT(this)||this._resume())}_resume(){Q.skipAnimation?this.finish():ag.start(this)}_stop(a,b){if(bS(this)){bU(this,!1);let c=this.animation;U(c.values,a=>{a.done=!0}),c.toValues&&(c.onChange=c.onPause=c.onResume=void 0),aJ(this,{type:"idle",parent:this});let d=b?bJ(this.get()):bI(this.get(),bX(this,a??c.to));Y(this._pendingCalls,d),c.changed&&(c.changed=!1,b1(this,"onRest",d,this))}}};function bX(a,b){let c=bv(b);return T(bv(a.get()),c)}function bY(a,b=a.loop,c=a.to){let d=bm(b);if(d){let e=!0!==d&&bu(d),f=(e||a).reverse,g=!e||e.reset;return bZ({...a,loop:b,default:!1,pause:void 0,to:!f||bx(c)?c:void 0,from:g?a.from:void 0,reset:g,...e})}}function bZ(a){let{to:b,from:c}=a=bu(a),d=new Set;return S.obj(b)&&b$(b,d),S.obj(c)&&b$(c,d),a.keys=d.size?Array.from(d):null,a}function b$(a,b){V(a,(a,c)=>null!=a&&b.add(c))}var b_=["onStart","onRest","onChange","onPause","onResume"];function b0(a,b,c){a.animation[c]=b[c]!==bp(b,c)?bo(b[c],a.key):void 0}function b1(a,b,...c){a.animation[b]?.(...c),a.defaultProps[b]?.(...c)}var b2=["onStart","onChange","onRest"],b3=1,b4=class{constructor(a,b){this.id=b3++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),b&&(this._flush=b),a&&this.start({default:!0,...a})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(a=>a.idle&&!a.isDelayed&&!a.isPaused)}get item(){return this._item}set item(a){this._item=a}get(){let a={};return this.each((b,c)=>a[c]=b.get()),a}set(a){for(let b in a){let c=a[b];S.und(c)||this.springs[b].set(c)}}update(a){return a&&this.queue.push(bZ(a)),this}start(a){let{queue:b}=this;return(a?b=W(a).map(bZ):this.queue=[],this._flush)?this._flush(this,b):(cb(this,b),b5(this,b))}stop(a,b){if(!!a!==a&&(b=a),b){let c=this.springs;U(W(b),b=>c[b].stop(!!a))}else bL(this._state,this._lastAsyncId),this.each(b=>b.stop(!!a));return this}pause(a){if(S.und(a))this.start({pause:!0});else{let b=this.springs;U(W(a),a=>b[a].pause())}return this}resume(a){if(S.und(a))this.start({pause:!1});else{let b=this.springs;U(W(a),a=>b[a].resume())}return this}each(a){V(this.springs,a)}_onFrame(){let{onStart:a,onChange:b,onRest:c}=this._events,d=this._active.size>0,e=this._changed.size>0;(d&&!this._started||e&&!this._started)&&(this._started=!0,X(a,([a,b])=>{b.value=this.get(),a(b,this,this._item)}));let f=!d&&this._started,g=e||f&&c.size?this.get():null;e&&b.size&&X(b,([a,b])=>{b.value=g,a(b,this,this._item)}),f&&(this._started=!1,X(c,([a,b])=>{b.value=g,a(b,this,this._item)}))}eventObserved(a){if("change"==a.type)this._changed.add(a.parent),a.idle||this._active.add(a.parent);else{if("idle"!=a.type)return;this._active.delete(a.parent)}y.onFrame(this._onFrame)}};function b5(a,b){return Promise.all(b.map(b=>b6(a,b))).then(b=>bG(a,b))}async function b6(a,b,c){let{keys:d,to:e,from:f,loop:g,onRest:h,onResolve:i}=b,j=S.obj(b.default)&&b.default;g&&(b.loop=!1),!1===e&&(b.to=null),!1===f&&(b.from=null);let k=S.arr(e)||S.fun(e)?e:void 0;k?(b.to=void 0,b.onRest=void 0,j&&(j.onRest=void 0)):U(b2,c=>{let d=b[c];if(S.fun(d)){let e=a._events[c];b[c]=({finished:a,cancelled:b})=>{let c=e.get(d);c?(a||(c.finished=!1),b&&(c.cancelled=!0)):e.set(d,{value:null,finished:a||!1,cancelled:b||!1})},j&&(j[c]=b[c])}});let l=a._state;!l.paused===b.pause?(l.paused=b.pause,Y(b.pause?l.pauseQueue:l.resumeQueue)):l.paused&&(b.pause=!0);let m=(d||Object.keys(a.springs)).map(c=>a.springs[c].start(b)),n=!0===b.cancel||!0===bp(b,"cancel");(k||n&&l.asyncId)&&m.push(bF(++a._lastAsyncId,{props:b,state:l,actions:{pause:R,resume:R,start(b,c){n?(bL(l,a._lastAsyncId),c(bJ(a))):(b.onRest=h,c(bK(k,b,l,a)))}}})),l.paused&&await new Promise(a=>{l.resumeQueue.add(a)});let o=bG(a,await Promise.all(m));if(g&&o.finished&&!(c&&o.noop)){let c=bY(b,g,e);if(c)return cb(a,[c]),b6(a,c,!0)}return i&&y.batchedUpdates(()=>i(o,a,a.item)),o}function b7(a,b){let c={...a.springs};return b&&U(W(b),a=>{S.und(a.keys)&&(a=bZ(a)),S.obj(a.to)||(a={...a,to:void 0}),ca(c,a,a=>b9(a))}),b8(a,c),c}function b8(a,b){V(b,(b,c)=>{a.springs[c]||(a.springs[c]=b,aM(b,a))})}function b9(a,b){let c=new bW;return c.key=a,b&&aM(c,b),c}function ca(a,b,c){b.keys&&U(b.keys,d=>{(a[d]||(a[d]=c(d)))._prepareNode(b)})}function cb(a,b){U(b,b=>{ca(a.springs,b,b=>b9(b,a))})}var cc=h.createContext({pause:!1,immediate:!1}),cd=()=>{let a=[],b=function(b){a_(`${aY}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);let d=[];return U(a,(a,e)=>{if(S.und(b))d.push(a.start());else{let f=c(b,a,e);f&&d.push(a.start(f))}}),d};b.current=a,b.add=function(b){a.includes(b)||a.push(b)},b.delete=function(b){let c=a.indexOf(b);~c&&a.splice(c,1)},b.pause=function(){return U(a,a=>a.pause(...arguments)),this},b.resume=function(){return U(a,a=>a.resume(...arguments)),this},b.set=function(b){U(a,(a,c)=>{let d=S.fun(b)?b(c,a):b;d&&a.set(d)})},b.start=function(b){let c=[];return U(a,(a,d)=>{if(S.und(b))c.push(a.start());else{let e=this._getProps(b,a,d);e&&c.push(a.start(e))}}),c},b.stop=function(){return U(a,a=>a.stop(...arguments)),this},b.update=function(b){return U(a,(a,c)=>a.update(this._getProps(b,a,c))),this};let c=function(a,b,c){return S.fun(a)?a(c,b):a};return b._getProps=c,b};function ce(a,b,c){let d=S.fun(b)&&b;d&&!c&&(c=[]);let e=(0,h.useMemo)(()=>d||3==arguments.length?cd():void 0,[]),f=(0,h.useRef)(0),g=a2(),i=(0,h.useMemo)(()=>({ctrls:[],queue:[],flush(a,b){let c=b7(a,b);return!(f.current>0)||i.queue.length||Object.keys(c).some(b=>!a.springs[b])?new Promise(d=>{b8(a,c),i.queue.push(()=>{d(b5(a,b))}),g()}):b5(a,b)}}),[]),j=(0,h.useRef)([...i.ctrls]),k=(0,h.useRef)([]),l=a5(a)||0;function m(a,c){for(let e=a;e<c;e++){let a=j.current[e]||(j.current[e]=new b4(null,i.flush)),c=d?d(e,a):b[e];c&&(k.current[e]=function(a){let b=bZ(a);return S.und(b.default)&&(b.default=br(b)),b}(c))}}(0,h.useMemo)(()=>{U(j.current.slice(a,l),a=>{by(a,e),a.stop(!0)}),j.current.length=a,m(l,a)},[a]),(0,h.useMemo)(()=>{m(0,Math.min(l,a))},c);let n=j.current.map((a,b)=>b7(a,k.current[b])),o=(0,h.useContext)(cc),p=a5(o),q=o!==p&&bw(o);a1(()=>{f.current++,i.ctrls=j.current;let{queue:a}=i;a.length&&(i.queue=[],U(a,a=>a())),U(j.current,(a,b)=>{e?.add(a),q&&a.start({default:o});let c=k.current[b];c&&(bz(a,c.ref),a.ref?a.queue.push(c):a.start(c))})}),a3(()=>()=>{U(i.ctrls,a=>a.stop(!0))});let r=n.map(a=>({...a}));return e?[r,e]:r}function cf(a,b){let c=S.fun(a),[[d],e]=ce(1,c?a:[a],c?b||[]:b);return c||2==arguments.length?[d,e]:d}function cg(a,b,c){let d=S.fun(b)&&b,{reset:e,sort:f,trail:g=0,expires:i=!0,exitBeforeEnter:j=!1,onDestroyed:k,ref:l,config:m}=d?d():b,n=(0,h.useMemo)(()=>d||3==arguments.length?cd():void 0,[]),o=W(a),p=[],q=(0,h.useRef)(null),r=e?null:q.current;a1(()=>{q.current=p}),a3(()=>(U(p,a=>{n?.add(a.ctrl),a.ctrl.ref=n}),()=>{U(q.current,a=>{a.expired&&clearTimeout(a.expirationId),by(a.ctrl,n),a.ctrl.stop(!0)})}));let s=function(a,{key:b,keys:c=b},d){if(null===c){let b=new Set;return a.map(a=>{let c=d&&d.find(c=>c.item===a&&"leave"!==c.phase&&!b.has(c));return c?(b.add(c),c.key):ch++})}return S.und(c)?a:S.fun(c)?a.map(c):W(c)}(o,d?d():b,r),t=e&&q.current||[];a1(()=>U(t,({ctrl:a,item:b,key:c})=>{by(a,n),bm(k,b,c)}));let u=[];if(r&&U(r,(a,b)=>{a.expired?(clearTimeout(a.expirationId),t.push(a)):~(b=u[b]=s.indexOf(a.key))&&(p[b]=a)}),U(o,(a,b)=>{p[b]||(p[b]={key:s[b],item:a,phase:"mount",ctrl:new b4},p[b].ctrl.item=a)}),u.length){let a=-1,{leave:c}=d?d():b;U(u,(b,d)=>{let e=r[d];~b?(a=p.indexOf(e),p[a]={...e,item:o[b]}):c&&p.splice(++a,0,e)})}S.fun(f)&&p.sort((a,b)=>f(a.item,b.item));let v=-g,w=a2(),x=br(b),y=new Map,z=(0,h.useRef)(new Map),A=(0,h.useRef)(!1);U(p,(a,c)=>{let e,f,h=a.key,k=a.phase,n=d?d():b,o=bm(n.delay||0,h);if("mount"==k)e=n.enter,f="enter";else{let a=0>s.indexOf(h);if("leave"!=k)if(a)e=n.leave,f="leave";else{if(!(e=n.update))return;f="update"}else{if(a)return;e=n.enter,f="enter"}}if(e=bm(e,a.item,c),!(e=S.obj(e)?bu(e):{to:e}).config){let b=m||x.config;e.config=bm(b,a.item,c,f)}v+=g;let p={...x,delay:o+v,ref:l,immediate:n.immediate,reset:!1,...e};if("enter"==f&&S.und(p.from)){let e=d?d():b;p.from=bm(S.und(e.initial)||r?e.from:e.initial,a.item,c)}let{onResolve:t}=p;p.onResolve=a=>{bm(t,a);let b=q.current,c=b.find(a=>a.key===h);if(c&&(!a.cancelled||"update"==c.phase)&&c.ctrl.idle){let a=b.every(a=>a.ctrl.idle);if("leave"==c.phase){let b=bm(i,c.item);if(!1!==b){let d=!0===b?0:b;if(c.expired=!0,!a&&d>0){d<=0x7fffffff&&(c.expirationId=setTimeout(w,d));return}}}a&&b.some(a=>a.expired)&&(z.current.delete(c),j&&(A.current=!0),w())}};let u=b7(a.ctrl,p);"leave"===f&&j?z.current.set(a,{phase:f,springs:u,payload:p}):y.set(a,{phase:f,springs:u,payload:p})});let B=(0,h.useContext)(cc),C=a5(B),D=B!==C&&bw(B);a1(()=>{D&&U(p,a=>{a.ctrl.start({default:B})})},[B]),U(y,(a,b)=>{if(z.current.size){let a=p.findIndex(a=>a.key===b.key);p.splice(a,1)}}),a1(()=>{U(z.current.size?z.current:y,({phase:a,payload:b},c)=>{let{ctrl:d}=c;c.phase=a,n?.add(d),D&&"enter"==a&&d.start({default:B}),b&&(bz(d,b.ref),(d.ref||n)&&!A.current?d.update(b):(d.start(b),A.current&&(A.current=!1)))})},e?void 0:c);let E=a=>h.createElement(h.Fragment,null,p.map((b,c)=>{let{springs:d}=y.get(b)||b.ctrl,e=a({...d},b.item,b,c),f=S.str(b.key)||S.num(b.key)?b.key:b.ctrl.id,g=h.version<"19.0.0",i=e?.props??{};return g&&(i.ref=e.ref),e&&e.type?h.createElement(e.type,{key:f,...i}):e}));return n?[E,n]:E}var ch=1,ci=class extends bP{constructor(a,b){super(),this.source=a,this.idle=!0,this._active=new Set,this.calc=aD(...b);let c=this._get();a8(this,bh(c).create(c))}advance(a){let b=this._get();T(b,this.get())||(a7(this).setValue(b),this._onChange(b,this.idle)),!this.idle&&ck(this._active)&&cl(this)}_get(){let a=S.arr(this.source)?this.source.map(aH):W(aH(this.source));return this.calc(...a)}_start(){this.idle&&!ck(this._active)&&(this.idle=!1,U(a9(this),a=>{a.done=!1}),Q.skipAnimation?(y.batchedUpdates(()=>this.advance()),cl(this)):ag.start(this))}_attach(){let a=1;U(W(this.source),b=>{aG(b)&&aM(b,this),b instanceof bP&&(b.idle||this._active.add(b),a=Math.max(a,b.priority+1))}),this.priority=a,this._start()}_detach(){U(W(this.source),a=>{aG(a)&&aN(a,this)}),this._active.clear(),cl(this)}eventObserved(a){"change"==a.type?a.idle?this.advance():(this._active.add(a.parent),this._start()):"idle"==a.type?this._active.delete(a.parent):"priority"==a.type&&(this.priority=W(this.source).reduce((a,b)=>Math.max(a,(b instanceof bP?b.priority:0)+1),0))}};function cj(a){return!1!==a.idle}function ck(a){return!a.size||Array.from(a).every(cj)}function cl(a){a.idle||(a.idle=!0,U(a9(a),a=>{a.done=!0}),aJ(a,{type:"idle",parent:a}))}Q.assign({createStringInterpolator:aX,to:(a,b)=>new ci(a,b)}),ag.advance;var cm=c(5081),cn=/^--/,co={},cp={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cq=["Webkit","Ms","Moz","O"];cp=Object.keys(cp).reduce((a,b)=>(cq.forEach(c=>a[((a,b)=>a+b.charAt(0).toUpperCase()+b.substring(1))(c,b)]=a[b]),a),cp);var cr=/^(matrix|translate|scale|rotate|skew)/,cs=/^(translate)/,ct=/^(rotate|skew)/,cu=(a,b)=>S.num(a)&&0!==a?a+b:a,cv=(a,b)=>S.arr(a)?a.every(a=>cv(a,b)):S.num(a)?a===b:parseFloat(a)===b,cw=class extends be{constructor({x:a,y:b,z:c,...d}){let e=[],f=[];(a||b||c)&&(e.push([a||0,b||0,c||0]),f.push(a=>[`translate3d(${a.map(a=>cu(a,"px")).join(",")})`,cv(a,0)])),V(d,(a,b)=>{if("transform"===b)e.push([a||""]),f.push(a=>[a,""===a]);else if(cr.test(b)){if(delete d[b],S.und(a))return;let c=cs.test(b)?"px":ct.test(b)?"deg":"";e.push(W(a)),f.push("rotate3d"===b?([a,b,d,e])=>[`rotate3d(${a},${b},${d},${cu(e,c)})`,cv(e,0)]:a=>[`${b}(${a.map(a=>cu(a,c)).join(",")})`,cv(a,+!!b.startsWith("scale"))])}}),e.length&&(d.transform=new cx(e,f)),super(d)}},cx=class extends aK{constructor(a,b){super(),this.inputs=a,this.transforms=b,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let a="",b=!0;return U(this.inputs,(c,d)=>{let e=aH(c[0]),[f,g]=this.transforms[d](S.arr(e)?e:c.map(aH));a+=" "+f,b=b&&g}),b?"none":a}observerAdded(a){1==a&&U(this.inputs,a=>U(a,a=>aG(a)&&aM(a,this)))}observerRemoved(a){0==a&&U(this.inputs,a=>U(a,a=>aG(a)&&aN(a,this)))}eventObserved(a){"change"==a.type&&(this._value=null),aJ(this,a)}};Q.assign({batchedUpdates:cm.unstable_batchedUpdates,createStringInterpolator:aX,colors:{transparent:0,aliceblue:0xf0f8ffff,antiquewhite:0xfaebd7ff,aqua:0xffffff,aquamarine:0x7fffd4ff,azure:0xf0ffffff,beige:0xf5f5dcff,bisque:0xffe4c4ff,black:255,blanchedalmond:0xffebcdff,blue:65535,blueviolet:0x8a2be2ff,brown:0xa52a2aff,burlywood:0xdeb887ff,burntsienna:0xea7e5dff,cadetblue:0x5f9ea0ff,chartreuse:0x7fff00ff,chocolate:0xd2691eff,coral:0xff7f50ff,cornflowerblue:0x6495edff,cornsilk:0xfff8dcff,crimson:0xdc143cff,cyan:0xffffff,darkblue:35839,darkcyan:9145343,darkgoldenrod:0xb8860bff,darkgray:0xa9a9a9ff,darkgreen:6553855,darkgrey:0xa9a9a9ff,darkkhaki:0xbdb76bff,darkmagenta:0x8b008bff,darkolivegreen:0x556b2fff,darkorange:0xff8c00ff,darkorchid:0x9932ccff,darkred:0x8b0000ff,darksalmon:0xe9967aff,darkseagreen:0x8fbc8fff,darkslateblue:0x483d8bff,darkslategray:0x2f4f4fff,darkslategrey:0x2f4f4fff,darkturquoise:0xced1ff,darkviolet:0x9400d3ff,deeppink:0xff1493ff,deepskyblue:0xbfffff,dimgray:0x696969ff,dimgrey:0x696969ff,dodgerblue:0x1e90ffff,firebrick:0xb22222ff,floralwhite:0xfffaf0ff,forestgreen:0x228b22ff,fuchsia:0xff00ffff,gainsboro:0xdcdcdcff,ghostwhite:0xf8f8ffff,gold:0xffd700ff,goldenrod:0xdaa520ff,gray:0x808080ff,green:8388863,greenyellow:0xadff2fff,grey:0x808080ff,honeydew:0xf0fff0ff,hotpink:0xff69b4ff,indianred:0xcd5c5cff,indigo:0x4b0082ff,ivory:0xfffff0ff,khaki:0xf0e68cff,lavender:0xe6e6faff,lavenderblush:0xfff0f5ff,lawngreen:0x7cfc00ff,lemonchiffon:0xfffacdff,lightblue:0xadd8e6ff,lightcoral:0xf08080ff,lightcyan:0xe0ffffff,lightgoldenrodyellow:0xfafad2ff,lightgray:0xd3d3d3ff,lightgreen:0x90ee90ff,lightgrey:0xd3d3d3ff,lightpink:0xffb6c1ff,lightsalmon:0xffa07aff,lightseagreen:0x20b2aaff,lightskyblue:0x87cefaff,lightslategray:0x778899ff,lightslategrey:0x778899ff,lightsteelblue:0xb0c4deff,lightyellow:0xffffe0ff,lime:0xff00ff,limegreen:0x32cd32ff,linen:0xfaf0e6ff,magenta:0xff00ffff,maroon:0x800000ff,mediumaquamarine:0x66cdaaff,mediumblue:52735,mediumorchid:0xba55d3ff,mediumpurple:0x9370dbff,mediumseagreen:0x3cb371ff,mediumslateblue:0x7b68eeff,mediumspringgreen:0xfa9aff,mediumturquoise:0x48d1ccff,mediumvioletred:0xc71585ff,midnightblue:0x191970ff,mintcream:0xf5fffaff,mistyrose:0xffe4e1ff,moccasin:0xffe4b5ff,navajowhite:0xffdeadff,navy:33023,oldlace:0xfdf5e6ff,olive:0x808000ff,olivedrab:0x6b8e23ff,orange:0xffa500ff,orangered:0xff4500ff,orchid:0xda70d6ff,palegoldenrod:0xeee8aaff,palegreen:0x98fb98ff,paleturquoise:0xafeeeeff,palevioletred:0xdb7093ff,papayawhip:0xffefd5ff,peachpuff:0xffdab9ff,peru:0xcd853fff,pink:0xffc0cbff,plum:0xdda0ddff,powderblue:0xb0e0e6ff,purple:0x800080ff,rebeccapurple:0x663399ff,red:0xff0000ff,rosybrown:0xbc8f8fff,royalblue:0x4169e1ff,saddlebrown:0x8b4513ff,salmon:0xfa8072ff,sandybrown:0xf4a460ff,seagreen:0x2e8b57ff,seashell:0xfff5eeff,sienna:0xa0522dff,silver:0xc0c0c0ff,skyblue:0x87ceebff,slateblue:0x6a5acdff,slategray:0x708090ff,slategrey:0x708090ff,snow:0xfffafaff,springgreen:0xff7fff,steelblue:0x4682b4ff,tan:0xd2b48cff,teal:8421631,thistle:0xd8bfd8ff,tomato:0xff6347ff,turquoise:0x40e0d0ff,violet:0xee82eeff,wheat:0xf5deb3ff,white:0xffffffff,whitesmoke:0xf5f5f5ff,yellow:0xffff00ff,yellowgreen:0x9acd32ff}});var cy=((a,{applyAnimatedValues:b=()=>!1,createAnimatedStyle:c=a=>new be(a),getComponentProps:d=a=>a}={})=>{let e={applyAnimatedValues:b,createAnimatedStyle:c,getComponentProps:d},f=a=>{let b=bl(a)||"Anonymous";return(a=S.str(a)?f[a]||(f[a]=bi(a,e)):a[bk]||(a[bk]=bi(a,e))).displayName=`Animated(${b})`,a};return V(a,(b,c)=>{S.arr(a)&&(c=bl(b)),f[c]=f(b)}),{animated:f}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(a,b){if(!a.nodeType||!a.setAttribute)return!1;let c="filter"===a.nodeName||a.parentNode&&"filter"===a.parentNode.nodeName,{className:d,style:e,children:f,scrollTop:g,scrollLeft:h,viewBox:i,...j}=b,k=Object.values(j),l=Object.keys(j).map(b=>c||a.hasAttribute(b)?b:co[b]||(co[b]=b.replace(/([A-Z])/g,a=>"-"+a.toLowerCase())));for(let b in void 0!==f&&(a.textContent=f),e)if(e.hasOwnProperty(b)){var m;let c=null==(m=e[b])||"boolean"==typeof m||""===m?"":"number"!=typeof m||0===m||cn.test(b)||cp.hasOwnProperty(b)&&cp[b]?(""+m).trim():m+"px";cn.test(b)?a.style.setProperty(b,c):a.style[b]=c}l.forEach((b,c)=>{a.setAttribute(b,k[c])}),void 0!==d&&(a.className=d),void 0!==g&&(a.scrollTop=g),void 0!==h&&(a.scrollLeft=h),void 0!==i&&a.setAttribute("viewBox",i)},createAnimatedStyle:a=>new cw(a),getComponentProps:({scrollTop:a,scrollLeft:b,...c})=>c}).animated;let cz={KOOL:{color:"#00ffff",shadow:"0 0 20px #00ffff"},COOL:{color:"#0099ff",shadow:"0 0 15px #0099ff"},GOOD:{color:"#00ff00",shadow:"0 0 10px #00ff00"},MISS:{color:"#ff0000",shadow:"0 0 10px #ff0000"}},cA=({judgment:a})=>{let b=cg(a?[a]:[],{from:{opacity:0,transform:"scale(0.5) translateY(50px)"},enter:{opacity:1,transform:"scale(1) translateY(0px)"},leave:{opacity:0,transform:"scale(0.5) translateY(-50px)"},config:{tension:280,friction:20},keys:a=>`${a}-${Date.now()}`});return(0,g.jsx)("div",{className:"absolute top-1/4 left-1/2 -translate-x-1/2 -translate-y-1/2 z-30 pointer-events-none",children:b((a,b)=>(0,g.jsx)(cy.div,{style:a,className:"text-7xl font-black uppercase tracking-widest",children:(0,g.jsx)("span",{style:{color:cz[b].color,textShadow:cz[b].shadow},children:b})}))})};class cB{static instance;audioContext=null;currentSource=null;currentBuffer=null;startTime=0;pauseTime=0;isPlaying=!1;isPaused=!1;volume=1;gainNode=null;hitsoundSources=new Map;hitsoundBuffers=new Map;hitsoundGainNode=null;endedListeners=new Set;constructor(){}static getInstance(){return cB.instance||(cB.instance=new cB),cB.instance}_toArrayBuffer(a){if(a instanceof ArrayBuffer)return a;if(a instanceof Uint8Array){let b=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);return 0===b.byteOffset&&b.byteLength===b.buffer.byteLength&&b.buffer instanceof ArrayBuffer?b.buffer:b.slice().buffer}if(a&&"Buffer"===a.type&&Array.isArray(a.data))return new Uint8Array(a.data).buffer;throw Error(`Received invalid data type for audio asset: ${typeof a}`)}setupGainNodes(){this.audioContext&&(this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination),this.hitsoundGainNode=this.audioContext.createGain(),this.hitsoundGainNode.connect(this.audioContext.destination))}async loadAudio(a){if(!this.audioContext)throw Error("AudioContext not initialized");try{let b=await window.electron.loadAsset(a),c=this._toArrayBuffer(b);this.currentBuffer=await this.audioContext.decodeAudioData(c)}catch(a){throw console.error("Failed to load audio:",a),a}}async loadHitsound(a,b){if(!this.hitsoundBuffers.has(a)&&b)try{console.log(`[AudioService] Loading hitsound '${a}' from: ${b}`);let c=await window.electron.loadAsset(b),d=c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength);try{let b=await this.audioContext.decodeAudioData(d);this.hitsoundBuffers.set(a,b),console.log(`[AudioService] Successfully loaded hitsound '${a}'`)}catch(b){console.warn(`[AudioService] Failed to decode audio data for hitsound '${a}':`,b),console.warn("[AudioService] This is likely due to invalid or corrupted audio file format. Skipping this hitsound.");return}}catch(c){console.error(`[AudioService] FAILED to load hitsound ${a} from ${b}:`,c)}}play(a=0){if(!this.audioContext||!this.currentBuffer||!this.gainNode)return void console.warn("Cannot play: AudioContext, buffer, or gain node not available");this.stop(),this.currentSource=this.audioContext.createBufferSource(),this.currentSource.buffer=this.currentBuffer,this.currentSource.connect(this.gainNode),this.startTime=this.audioContext.currentTime,this.pauseTime=0,this.isPlaying=!0,this.isPaused=!1,this.currentSource.onended=()=>{this.isPlaying=!1,this.isPaused=!1,this.endedListeners.forEach(a=>a())},this.currentSource.start(0,a)}pause(){this.currentSource&&this.isPlaying&&!this.isPaused&&(this.currentSource.stop(),this.pauseTime=this.getCurrentTime(),this.isPlaying=!1,this.isPaused=!0)}resume(){this.isPaused&&this.pauseTime>0&&this.play(this.pauseTime)}stop(){this.currentSource&&(this.currentSource.stop(),this.currentSource=null),this.isPlaying=!1,this.isPaused=!1,this.startTime=0,this.pauseTime=0}playHitsound(a,b=1){if(!this.audioContext||!this.hitsoundGainNode)return;let c=this.hitsoundBuffers.get(a);if(!c)return void console.warn(`Hitsound not found: ${a}`);let d=this.audioContext.createBufferSource(),e=this.audioContext.createGain();d.buffer=c,e.gain.value=b,d.connect(e),e.connect(this.hitsoundGainNode),d.start(),d.onended=()=>{d.disconnect(),e.disconnect()}}getCurrentTime(){return this.audioContext?this.isPaused?this.pauseTime:this.isPlaying&&this.startTime>0?this.audioContext.currentTime-this.startTime:0:0}getDuration(){return this.currentBuffer?this.currentBuffer.duration:0}setVolume(a){this.volume=Math.max(0,Math.min(1,a)),this.gainNode&&(this.gainNode.gain.value=this.volume)}setHitsoundVolume(a){this.hitsoundGainNode&&(this.hitsoundGainNode.gain.value=Math.max(0,Math.min(1,a)))}getIsPlaying(){return this.isPlaying}getIsPaused(){return this.isPaused}onEnded(a){return this.endedListeners.add(a),()=>this.endedListeners.delete(a)}seekTo(a){this.isPlaying?this.play(a):this.pauseTime=a}}let cC=cB.getInstance(),cD=({chart:a,onPinThrow:b,score:d,combo:e,judgment:f,noteSpeed:i})=>{console.log("[PinGameView] Component mounted with chart:",a?.title);let[j,k]=(0,h.useState)([]),[l,m]=(0,h.useState)(!1),n=(0,h.useRef)(0),{knives:o,throwKnife:p,getKnivesPositions:q,setHitCallback:r,setActiveNotes:s,setJudgmentWindows:t,updateGameTime:u}=(({targetRadius:a,velocity:b=400,rotationSpeed:d=540,isGameActive:e})=>{let[f,g]=(0,h.useState)([]),i=(0,h.useRef)(null),j=(0,h.useRef)(0),k=(0,h.useRef)(null);(0,h.useEffect)(()=>{console.log("[useKnifePhysics] Initializing physics worker...");try{let e=new Worker(new URL(c.p+c.u(783),c.b));return i.current=e,console.log("[useKnifePhysics] Worker created, sending INIT message"),e.postMessage({type:"INIT",payload:{targetRadius:a,velocity:b,rotationSpeed:d}}),e.onmessage=a=>{let{type:b,payload:c}=a.data;console.log("[useKnifePhysics] Worker message:",b,c),"UPDATE"===b?g(c.knives):"HIT"===b&&(console.log("[useKnifePhysics] Hit detected:",c),k.current&&k.current(c))},e.onerror=a=>{console.error("[useKnifePhysics] Worker error:",a)},()=>{console.log("[useKnifePhysics] Terminating worker"),e.terminate()}}catch(a){console.error("[useKnifePhysics] Failed to create worker:",a)}},[a,b,d]);let l=(0,h.useCallback)(()=>{if(console.log("[useKnifePhysics] throwKnife called, isGameActive:",e,"worker:",!!i.current),!e||!i.current)return void console.log("[useKnifePhysics] Cannot throw knife - game inactive or no worker");let a={id:j.current++,isStuck:!1,stuckAngle:0,thrownAt:Date.now(),position:{x:0,y:250,rotation:0}};console.log("[useKnifePhysics] Throwing knife:",a),i.current.postMessage({type:"THROW",payload:{knife:a}})},[e]),m=(0,h.useCallback)(()=>f.map(a=>({knife:a,position:a.position})),[f]),n=(0,h.useCallback)(a=>{k.current=a},[]),o=(0,h.useCallback)(a=>{console.log("[useKnifePhysics] Setting active notes:",a.length),i.current&&i.current.postMessage({type:"SET_NOTES",payload:{notes:a}})},[]),p=(0,h.useCallback)(a=>{console.log("[useKnifePhysics] Setting judgment windows:",a),i.current&&i.current.postMessage({type:"SET_JUDGMENT_WINDOWS",payload:{windows:a}})},[]),q=(0,h.useCallback)(a=>{i.current&&i.current.postMessage({type:"UPDATE_GAME_TIME",payload:{gameTime:a}})},[]),r=(0,h.useCallback)(()=>{i.current&&i.current.postMessage({type:"RESET"}),g([]),j.current=0},[]),s=f.filter(a=>a.isStuck).length;return{knives:f,throwKnife:l,getKnivesPositions:m,resetKnives:r,stuckKnivesCount:s,setHitCallback:n,setActiveNotes:o,setJudgmentWindows:p,updateGameTime:q}})({targetRadius:80,velocity:400,rotationSpeed:540,isGameActive:!0});(0,h.useEffect)(()=>{let a=setInterval(()=>{let a=1e3*cC.getCurrentTime();n.current=a,u(a)},16);return()=>clearInterval(a)},[u]),(0,h.useEffect)(()=>{if(a?.notes){console.log("[PinGameView] Setting active notes for physics:",a.notes.length),s(a.notes.map(a=>({time:1e3*a.time})));let b=a.metadata?.overallDifficulty??5,c=140-8*b,d=200-10*b,e=Math.max(d+40,c+20),f={KOOL:Math.max(80-6*b,15),COOL:Math.max(c,50),GOOD:Math.max(d,100),MISS:Math.max(e,150)};console.log("[PinGameView] Setting judgment windows:",f),t(f)}},[a,s,t]),(0,h.useEffect)(()=>{r(a=>{console.log("[PinGameView] Physics hit:",a),a.judgment&&b(a.judgment)})},[r,b]),(0,h.useEffect)(()=>{if(!a?.notes)return;let b=setInterval(()=>{let b=n.current;k(a.notes.filter(a=>{let c=1e3*a.time-b;return c>0&&c<=2e3}).map(a=>{let c=1e3*a.time,d=c-b,e=Math.max(.1,d/2e3);return{id:`circle-${a.time}`,noteTime:c,startTime:b-(2e3-d),scale:e}}))},100);return()=>clearInterval(b)},[a,2e3]);let x=(0,h.useCallback)(()=>{l||(console.log("[PinGameView] Throwing knife at time:",n.current),console.log("[PinGameView] Current knives before throw:",o?.length||0),m(!0),p(),setTimeout(()=>m(!1),150))},[l,p,o]);(0,h.useEffect)(()=>{let a=a=>{"KeyS"!==a.code||l||x()};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[x,l]);let y=q();return console.log("[PinGameView] Knives:",o?.length||0,"KnifePositions:",y?.length||0),y?.length>0&&console.log("[PinGameView] First knife position:",y[0]),(0,g.jsxs)("div",{style:{zIndex:10},className:"jsx-532d500bfc6d5d04 min-h-screen relative overflow-hidden flex flex-col items-center justify-center bg-gray-900",children:[(0,g.jsxs)("div",{style:{width:"100vw",height:"100vh",zIndex:10},className:"jsx-532d500bfc6d5d04 relative flex items-center justify-center",children:[(0,g.jsx)("div",{style:{left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"160px",height:"160px"},className:"jsx-532d500bfc6d5d04 absolute flex items-center justify-center",children:(0,g.jsx)("div",{style:{animation:"spin 5s linear infinite"},className:"jsx-532d500bfc6d5d04 w-full h-full rounded-full border-4 border-white flex items-center justify-center",children:(0,g.jsx)("div",{className:"jsx-532d500bfc6d5d04 text-white text-lg font-bold",children:"TARGET"})})}),j.map(a=>(0,g.jsx)(w,{radius:80,scale:a.scale,opacity:Math.max(.3,a.scale)},a.id)),y.map(({knife:a,position:b})=>(0,g.jsxs)("div",{style:{left:"50%",top:"50%",transform:`translate(-50%, -50%) translate(${b.x}px, ${b.y}px) rotate(${b.rotation}deg)`,transformOrigin:"center center"},className:"jsx-532d500bfc6d5d04 absolute",children:[(0,g.jsx)("div",{style:{width:"0",height:"0",borderLeft:"6px solid transparent",borderRight:"6px solid transparent",borderBottom:"20px solid #e5e7eb",top:"-20px",left:"-6px",boxShadow:"0 2px 4px rgba(0,0,0,0.3)"},className:"jsx-532d500bfc6d5d04 absolute bg-gradient-to-r from-gray-300 to-gray-100"}),(0,g.jsx)("div",{style:{width:"12px",height:"40px",borderRadius:"2px",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.3)",transform:"translateX(-6px)"},className:"jsx-532d500bfc6d5d04 bg-gradient-to-r from-amber-800 to-amber-600"})]},a.id))]}),(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04 absolute top-4 left-4 text-white text-lg",children:[(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04",children:["Score: ",d]}),(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04",children:["Combo: ",e]}),(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04",children:["Knives: ",o.length]})]}),(0,g.jsx)(cA,{judgment:f}),(0,g.jsx)("div",{className:"jsx-532d500bfc6d5d04 absolute bottom-4 left-4 text-white text-sm",children:"Press S to throw knife"}),(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04 absolute top-4 right-4 bg-black/50 text-white p-2 text-sm rounded",children:[(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04",children:["Chart: ",a?.title]}),(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04",children:["Notes: ",a?.notes?.length||0]}),(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04",children:["Time: ",(n.current/1e3).toFixed(1),"s"]}),(0,g.jsxs)("div",{className:"jsx-532d500bfc6d5d04",children:["Circles: ",j.length]})]}),(0,g.jsx)(v(),{id:"532d500bfc6d5d04",children:"@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}"})]})};function cE(a,b,c){return Math.max(b,Math.min(c,a))}let cF=({hitErrors:a,maxErrorMs:b})=>{let c=a.length>0?a.reduce((a,b)=>a+b,0)/a.length:0,d=`${50+c/b*50}%`;return(0,g.jsxs)("div",{className:"absolute bottom-12 left-1/2 -translate-x-1/2 w-72 h-4 bg-transparent flex items-center justify-center pointer-events-none",children:[(0,g.jsx)("div",{className:"w-full h-1 bg-black/30 rounded-full overflow-hidden",children:(0,g.jsxs)("div",{className:"absolute w-full h-full flex justify-between items-center",children:[(0,g.jsx)("div",{className:"w-[3px] h-[3px] bg-cyan-400 rounded-full"}),(0,g.jsx)("div",{className:"w-[3px] h-[3px] bg-green-400 rounded-full"}),(0,g.jsx)("div",{className:"w-[3px] h-[3px] bg-yellow-400 rounded-full"})]})}),(0,g.jsx)("div",{className:"absolute w-full h-full",children:a.map((c,d)=>{let e=`${50+c/b*50}%`;return(0,g.jsx)("div",{className:"absolute top-1/2 -translate-y-1/2 w-1 h-3 bg-white/80 rounded-full shadow-lg transition-all duration-300 ease-out",style:{left:e,opacity:1-(a.length-1-d)*.1}},d)})}),(0,g.jsx)("div",{className:"absolute top-0 bottom-0 left-1/2 -translate-x-1/2 w-0.5 bg-cyan-300 shadow-lg"}),(0,g.jsx)("div",{className:"absolute top-0 bottom-0 w-0.5 bg-yellow-300 transition-all duration-200 ease-in-out",style:{left:d}})]})},cG={KOOL:"#00ffff",COOL:"#88ff88",GOOD:"#ffcc22",MISS:"#ff6666"},cH=({judgment:a,hitError:b,onAnimationEnd:c})=>{let[d,e]=cf(()=>({from:{opacity:0,transform:"scale(0.8) translateY(20px)"},to:{opacity:1,transform:"scale(1) translateY(0px)"},config:{tension:300,friction:15},onRest:()=>{setTimeout(()=>{e.start({to:{opacity:0,transform:"scale(1) translateY(-30px)"},config:{tension:300,friction:20},onRest:c})},400)}})),f="KOOL"===a&&Math.abs(b)>2?b<0?"#88ccff":"#ff8888":cG[a];return(0,g.jsx)(cy.div,{style:d,className:"absolute text-2xl font-bold uppercase pointer-events-none -translate-x-1/2 -translate-y-1/2",children:(0,g.jsx)("span",{style:{color:f,textShadow:`0 0 8px ${f}`},children:a})})},cI=({onAnimationEnd:a,color:b})=>{let[c]=function(a,b,c){let d,e=S.fun(b)&&b;e&&!c&&(c=[]);let f=!0,g=ce(a,(a,c)=>{let g=e?e(a,c):b;return d=g.ref,f=f&&g.reverse,g},c||[{}]);if(a1(()=>{U(g[1].current,(a,b)=>{let c=g[1].current[b+(f?1:-1)];if(bz(a,d),a.ref){c&&a.update({to:c.springs});return}c?a.start({to:c.springs}):a.start()})},c),e||3==arguments.length){let a=d??g[1];return a._getProps=(b,c,d)=>{let e=S.fun(b)?b(d,c):b;if(e){let b=a.current[d+(e.reverse?1:-1)];return b&&(e.to=b.springs),e}},g}return g[0]}(8,b=>({from:{opacity:1,scale:0,x:0,y:0},to:{opacity:0,scale:1.5,x:(Math.random()-.5)*150,y:(Math.random()-.5)*150},config:{mass:1,tension:400,friction:30},onRest:()=>{7===b&&a()}}));return(0,g.jsx)("div",{className:"absolute w-1 h-1",children:c.map((a,c)=>(0,g.jsx)(cy.div,{className:"absolute rounded-full",style:{...a,width:"8px",height:"8px",backgroundColor:b,boxShadow:`0 0 10px ${b}`}},c))})},cJ={KOOL:"#00ffff",COOL:"#88ff88",GOOD:"#ffcc22",MISS:"#ff6666"},cK=({chart:a})=>{var b;let{score:c,combo:d,judgment:e,isPaused:f,updateGame:i,togglePause:j,reset:k}=r(),[l,m]=(0,h.useState)([]),[n,o]=(0,h.useState)([]),[p,q]=(0,h.useState)([]),[s,t]=(0,h.useState)([]),u=(0,h.useRef)(0),v=(b=a.metadata?.approachRate??5)<=5?1800-120*b:1200-150*(b-5),{w300:x}=function(a){return{w300:80-6*a,w100:140-8*a,w50:200-10*a}}(a.metadata?.overallDifficulty??5);(0,h.useEffect)(()=>{let b=window.electron.onGameUpdate(b=>{if(b.judgment&&void 0!==b.hitError){let c=y(a.notes.findIndex(a=>a.time===1e3*b.noteTime)%8/8*360,150),d=`${Date.now()}`,e=cJ[b.judgment]||"#ffffff";if(o(a=>[...a,{id:d,judgment:b.judgment,hitError:b.hitError,x:c.x,y:c.y}]),"MISS"!==b.judgment){q(a=>[...a,{id:d,x:c.x,y:c.y,color:e}]);try{cC.playHitsound("normal-hitnormal")}catch(a){}}}void 0!==b.hitError&&m(a=>[...a.slice(-19),b.hitError]),i(b)});return()=>{b()}},[i,a.notes]);let y=(a,b)=>{let c=Math.PI/180*(a-90);return{x:Math.cos(c)*b,y:Math.sin(c)*b}};(0,h.useEffect)(()=>{let b,c=()=>{let d=1e3*cC.getCurrentTime();u.current=d,t(a.notes.filter(a=>{let b=1e3*a.time;return d>=b-v&&d<=b+250})),b=requestAnimationFrame(c)};return b=requestAnimationFrame(c),()=>cancelAnimationFrame(b)},[a.notes,v]);let z=(0,h.useCallback)(()=>{f||window.electron.handlePinPress(cC.getCurrentTime())},[f]);return(0,g.jsxs)("div",{className:"absolute inset-0 cursor-pointer",onClick:z,children:[p.map(a=>(0,g.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:`translate(calc(-50% + ${a.x}px), calc(-50% + ${a.y}px))`},children:(0,g.jsx)(cI,{color:a.color,onAnimationEnd:()=>q(b=>b.filter(b=>b.id!==a.id))})},a.id)),n.map(a=>(0,g.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:`translate(calc(-50% + ${a.x}px), calc(-50% + ${a.y}px))`},children:(0,g.jsx)(cH,{judgment:a.judgment,hitError:a.hitError,onAnimationEnd:()=>o(b=>b.filter(b=>b.id!==a.id)),id:a.id})},a.id)),(0,g.jsx)(cF,{hitErrors:l,maxErrorMs:x}),s.map(a=>{let b=1e3*a.time,c=b-v,d=u.current,e=function(a,b,c,d=2){return d+(1-d)*cE(1-(b-a)/c,0,1)}(d,b,v,2),f=function(a,b,c){let d=cE((a-b)/(.4*c),0,1);return d*d*(3-2*d)}(d,c,v);return(0,g.jsxs)("div",{className:"absolute left-1/2 top-1/2",style:{transform:"translate(-50%, -50%)"},children:[(0,g.jsx)("div",{className:"absolute rounded-full bg-blue-500/50 border-2 border-white shadow",style:{width:"96px",height:"96px",opacity:f,boxShadow:"0 0 24px rgba(59,130,246,0.45)"}}),(0,g.jsx)(w,{radius:48,scale:e,opacity:f})]},a.time)})]})},cL=({chart:a,isLoading:b,onStartGame:c,onBackToMenu:d})=>(0,g.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white",children:(0,g.jsxs)("div",{className:"text-center space-y-8 p-8 bg-black/30 rounded-xl backdrop-blur-sm border border-white/10",children:[(0,g.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"Ready to Play?"}),b?(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("div",{className:"animate-spin w-12 h-12 border-4 border-cyan-400 border-t-transparent rounded-full mx-auto"}),(0,g.jsx)("p",{className:"text-lg text-gray-300",children:"Loading chart and audio..."})]}):(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsx)("p",{className:"text-lg text-gray-300",children:"Chart loaded and ready!"}),(0,g.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,g.jsx)("button",{onClick:c,className:"px-8 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-lg font-semibold text-white transition-all duration-200 transform hover:scale-105 shadow-lg",children:"Start Game"}),(0,g.jsx)("button",{onClick:d,className:"px-6 py-3 bg-gray-600 hover:bg-gray-500 rounded-lg transition-colors",children:"Back to Menu"})]})]})]})}),cM=({onResume:a,onRestart:b,onBackToMenu:c})=>(0,g.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",children:(0,g.jsxs)("div",{className:"bg-gradient-to-br from-gray-900 to-gray-800 p-8 rounded-xl border border-white/20 shadow-2xl",children:[(0,g.jsx)("h2",{className:"text-3xl font-bold text-center mb-8 bg-gradient-to-r from-cyan-400 to-purple-400 bg-clip-text text-transparent",children:"ì¼ì‹œì •ì§€"}),(0,g.jsxs)("div",{className:"space-y-4 min-w-[200px]",children:[(0,g.jsx)("button",{onClick:a,className:"w-full px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 rounded-lg font-semibold text-white transition-all duration-200 transform hover:scale-105 shadow-lg",children:"ê³„ì†í•˜ê¸°"}),(0,g.jsx)("button",{onClick:b,className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 rounded-lg font-semibold text-white transition-all duration-200 transform hover:scale-105 shadow-lg",children:"ë‹¤ì‹œì‹œìž‘"}),(0,g.jsx)("button",{onClick:c,className:"w-full px-6 py-3 bg-gray-600 hover:bg-gray-500 rounded-lg font-semibold text-white transition-colors",children:"ë©”ë‰´ë¡œ"})]}),(0,g.jsx)("p",{className:"text-center text-gray-400 text-sm mt-6",children:"ESC í‚¤ë¥¼ ëˆŒëŸ¬ ê³„ì†í•˜ê¸°"})]})}),cN=({videoPath:a,className:b=""})=>{let[c,d]=(0,h.useState)(null),[e,f]=(0,h.useState)(!1),[i,j]=(0,h.useState)(!1),[k,l]=(0,h.useState)(!1),m=(0,h.useRef)(null);return((0,h.useEffect)(()=>(c&&c.startsWith("blob:")&&URL.revokeObjectURL(c),a)?(f(!0),j(!1),l(!1),window.electron.loadAsset(a).then(a=>{if(a){let b=new Blob([a],{type:"video/mp4"});d(URL.createObjectURL(b)),f(!1)}else throw Error("IPC returned no data for video asset")}).catch(a=>{console.error("Failed to load video asset via IPC:",a),j(!0),f(!1)}),()=>{c&&c.startsWith("blob:")&&URL.revokeObjectURL(c)}):void d(null),[a]),c)?(0,g.jsx)("video",{ref:m,className:`fixed inset-0 w-full h-full object-cover ${b}`,src:c,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,onLoadStart:()=>{f(!0)},onCanPlay:()=>{f(!1),l(!0),j(!1)},onError:()=>{console.error(`Failed to load video: ${c}`),f(!1),j(!0)},style:{opacity:+!!k,transition:"opacity 0.5s ease-in-out",zIndex:1}}):(0,g.jsxs)("div",{className:"fixed inset-0 bg-black flex items-center justify-center",style:{zIndex:-1},children:[e&&(0,g.jsx)("div",{className:"text-white",children:"Loading Video..."}),i&&(0,g.jsx)("div",{className:"text-red-500",children:"Error Loading Video"})]})},cO=({selectedChart:a,onBack:b})=>{console.log("[GameScene] Component rendered with chart:",a?.title,"gameMode:",a?.gameMode);let{score:c,combo:d,judgment:e,updateGame:f,togglePause:i,reset:j,isPaused:k}=r(),[l,m]=(0,h.useState)(!1),[n,o]=(0,h.useState)(!1),[p,q]=(0,h.useState)(!0),[s,t]=(0,h.useState)(null),[u,v]=(0,h.useState)(null),[w,x]=(0,h.useState)(null),y=a=>{if(!l||k)return;a&&console.log("[GameScene] Received judgment:",a);let b=cC.getCurrentTime();window.electron.handlePinPress(b)};(0,h.useEffect)(()=>{(async()=>{if(!a){console.error("No chart selected, returning to select screen."),b();return}try{if(o(!0),console.log("[Renderer] Loading PinChart:",a),!a||!a.notes||0===a.notes.length){console.error("[Renderer] CRITICAL: Chart data is missing or notes are empty!"),alert("Chart data is invalid. Returning to selection."),b();return}console.log("[Renderer] Chart validation passed - notes count:",a.notes.length),t(a),a.audioFilename&&(await cC.loadAudio(a.audioFilename),console.log(`[GameScene] Main audio loaded: ${a.audioFilename}`));let c=async(b,c)=>{try{let d=`${a.folderPath}/${c}`;console.log(`[HITSOUND DEBUG] Attempting to load sound: ${d} as '${b}'`),console.log(`[HITSOUND DEBUG] selectedChart.folderPath: ${a.folderPath}`),a&&a.folderPath?(await cC.loadHitsound(b,d),console.log(`[HITSOUND DEBUG] Successfully loaded sound: ${d} as '${b}'`)):(console.error("[HITSOUND DEBUG] Cannot load sound - missing selectedChart or folderPath"),console.error("[HITSOUND DEBUG] selectedChart:",a))}catch(a){console.error(`[HITSOUND DEBUG] FAILED to load sound asset: ${c}`,a)}};if(console.log("[HITSOUND DEBUG] Starting hitsound loading - all optional"),await c("normal-hitnormal","normal-hitnormal.wav"),await c("combobreak","combobreak.wav"),await c("normal-hitwhistle","normal-hitwhistle.wav"),console.log("[HITSOUND DEBUG] Hitsound loading completed - game can proceed without them"),a.videoPath)v(a.videoPath),x(null);else if(a.backgroundPath){v(null);try{let b=await window.electron.loadAsset(a.backgroundPath),c=new Blob([b],{type:"image/jpeg"}),d=URL.createObjectURL(c);x(d)}catch(a){console.error("Failed to load background image:",a),x(null)}}else v(null),x(null);o(!1),console.log("[GameScene] Asset loading completed successfully")}catch(c){console.error("Failed to load game assets:",c),o(!1);let a=c instanceof Error?c.message:"Unknown error";alert(`Failed to load game assets: ${a}

Returning to song selection.`),b()}})()},[a]),(0,h.useEffect)(()=>{let a=window.electron.onGameUpdate(a=>{f(a)});return()=>{a(),cC.stop()}},[]),(0,h.useEffect)(()=>{let a=a=>{l&&!k&&"Space"===a.code&&(a.preventDefault(),y())};return l&&!k&&window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[l,k]),(0,h.useEffect)(()=>{let a=a=>{"Escape"===a.code&&(a.preventDefault(),i())};return l&&window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[l,i]);let z=()=>{console.log("[GameScene] Starting game with pinChart:",s?.title,"notes:",s?.notes?.length),m(!0),q(!1),s?(window.electron.startGame(s),s.audioFilename&&(console.log("[GameScene] Starting audio playback:",s.audioFilename),cC.play())):console.error("[GameScene] Cannot start game - no pinChart available")};return l?k?(0,g.jsx)(cM,{onResume:i,onRestart:()=>{j(),i(),z()},onBackToMenu:()=>{j(),i(),b()}}):(0,g.jsxs)("div",{className:"relative w-full h-screen overflow-hidden bg-black",children:[u?(0,g.jsx)(cN,{videoPath:u},u):w?(0,g.jsx)("div",{className:"absolute inset-0 z-0 bg-cover bg-center",style:{backgroundImage:`url(${w})`}}):(0,g.jsx)("div",{className:"absolute inset-0 z-0 bg-gray-900"}),s&&((console.log("[GameScene] Rendering game view. GameMode:",s.gameMode),"pin"===s.gameMode)?(console.log("[GameScene] Rendering PinGameView"),(0,g.jsx)(cD,{chart:s,onPinThrow:y,score:c,combo:d,judgment:e,noteSpeed:500})):"osu"===s.gameMode?(console.log("[GameScene] Rendering OsuGameView"),(0,g.jsx)(cK,{chart:s})):(console.log("[GameScene] Unsupported gameMode:",s.gameMode),(0,g.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,g.jsxs)("div",{className:"text-white text-xl",children:["Unsupported game mode: ",s.gameMode]})}))),(0,g.jsxs)("div",{className:"absolute top-4 right-4 bg-black/50 text-white p-2 text-sm z-50 rounded",children:[(0,g.jsxs)("div",{children:["Chart: ",s?.title||"None"]}),(0,g.jsxs)("div",{children:["Mode: ",s?.gameMode||"Unknown"]}),(0,g.jsxs)("div",{children:["Notes: ",s?.notes?.length||0]}),(0,g.jsxs)("div",{children:["Status: ",l?"Playing":n?"Loading":"Ready"]}),(0,g.jsxs)("div",{children:["Audio: ",cC.getCurrentTime().toFixed(2),"s"]})]})]}):(0,g.jsx)("div",{children:(0,g.jsx)(cL,{chart:s,isLoading:n,onStartGame:z,onBackToMenu:b})})},cP=({score:a,maxCombo:b})=>{let{rank:c,color:d}=(a=>a>95e4?{rank:"S",color:"text-theme-highlight"}:a>9e5?{rank:"A",color:"text-theme-primary"}:a>8e5?{rank:"B",color:"text-theme-primary/80"}:a>7e5?{rank:"C",color:"text-theme-text-dark"}:{rank:"D",color:"text-theme-accent"})(a);return(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("p",{className:"text-2xl text-theme-text-dark font-medium mb-2",children:"FINAL SCORE"}),(0,g.jsx)("p",{className:"text-8xl font-black text-transparent bg-gradient-to-r from-theme-primary to-theme-secondary bg-clip-text mb-4",children:a.toLocaleString()}),(0,g.jsxs)("div",{className:"flex justify-center items-baseline gap-8 text-theme-text-light",children:[(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("p",{className:"text-lg text-theme-text-dark",children:"RANK"}),(0,g.jsx)("p",{className:`text-5xl font-bold ${d}`,children:c})]}),(0,g.jsxs)("div",{className:"text-center",children:[(0,g.jsx)("p",{className:"text-lg text-theme-text-dark",children:"MAX COMBO"}),(0,g.jsx)("p",{className:"text-5xl font-bold",children:b})]})]})]})},cQ={KOOL:"text-theme-highlight",COOL:"text-theme-primary",GOOD:"text-green-400",MISS:"text-theme-accent"},cR=({judgments:a})=>(0,g.jsx)("div",{className:"grid grid-cols-4 gap-4 text-center",children:["KOOL","COOL","GOOD","MISS"].map(b=>(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:`text-lg ${cQ[b]} font-bold`,children:b}),(0,g.jsx)("p",{className:"text-3xl font-semibold text-theme-text-light",children:a[b]})]},b))}),cS=({label:a,onClick:b,variant:c})=>(0,g.jsx)("button",{onClick:b,className:`px-8 py-3 rounded-xl transition-all duration-200 font-medium transform hover:scale-105 ${{primary:"bg-theme-primary/20 hover:bg-theme-primary/30 border border-theme-primary/50 text-theme-primary hover:text-theme-primary/90",secondary:"bg-theme-text-dark/30 hover:bg-theme-text-dark/50 text-theme-text-light/80 hover:text-theme-text-light"}[c]}`,children:a}),cT=({onRestart:a,onSelectMusic:b})=>(0,g.jsx)("div",{className:"flex justify-center gap-6",children:[{label:"Retry",onClick:a,variant:"primary"},{label:"Back to Menu",onClick:b,variant:"secondary"}].map(a=>(0,g.jsx)(cS,{...a},a.label))}),cU={S:"text-yellow-400",A:"text-green-400",B:"text-blue-400",C:"text-purple-400",D:"text-gray-500"},cV=({rank:a})=>{let b=cU[a]||"text-gray-500";return(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)("p",{className:"text-2xl font-semibold text-theme-text-light/80 mb-2",children:"Rank"}),(0,g.jsx)("div",{className:`text-9xl font-black ${b} transform-gpu transition-all duration-500`,style:{filter:`drop-shadow(0 0 20px ${b.replace("text-","bg-").split("-")[0]})`},children:a})]})},cW=({accuracy:a})=>{let b=2*Math.PI*60,{val:c}=cf({from:{val:0},to:{val:a},config:{duration:1e3}}),{strokeDashoffset:d}=cf({from:{strokeDashoffset:b},to:{strokeDashoffset:b-a/100*b},config:{duration:1e3}});return(0,g.jsxs)("div",{className:"flex flex-col items-center",children:[(0,g.jsx)("p",{className:"text-2xl font-semibold text-theme-text-light/80 mb-4",children:"Accuracy"}),(0,g.jsxs)("div",{className:"relative w-40 h-40",children:[(0,g.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 140 140",children:[(0,g.jsx)("circle",{cx:"70",cy:"70",r:60,strokeWidth:"10",className:"stroke-current text-theme-text-dark/30",fill:"transparent"}),(0,g.jsx)(cy.circle,{cx:"70",cy:"70",r:60,strokeWidth:"10",className:"stroke-current text-theme-accent transform -rotate-90 origin-center",fill:"transparent",strokeDasharray:b,strokeDashoffset:d,strokeLinecap:"round"})]}),(0,g.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,g.jsx)(cy.p,{className:"text-4xl font-bold text-theme-text-light",children:c.to(a=>`${a.toFixed(2)}%`)})})]})]})},cX=({onBack:a})=>{let{score:b,maxCombo:c,judgments:d,reset:e,setCurrentScene:f}=r(),[i,j]=(0,h.useState)(0),[k,l]=(0,h.useState)("");(0,h.useEffect)(()=>{let a=(a=>{let b=a.KOOL+a.COOL+a.GOOD+a.MISS;return 0===b?0:parseFloat(((+a.KOOL+.5*a.COOL+.25*a.GOOD)/b*100).toFixed(2))})(d),b=(a=>a>=98?"S":a>=95?"A":a>=90?"B":a>=80?"C":"D")(a);j(a),l(b)},[d]);let m=()=>{e(),f("Game")},n=()=>{e(),f("Select")},o=cg([a=>(0,g.jsx)(cy.div,{style:a,children:(0,g.jsx)(cP,{score:b,maxCombo:c})}),a=>(0,g.jsx)(cy.div,{style:a,children:(0,g.jsx)("div",{className:"w-full h-px bg-theme-text-dark/50"})}),a=>(0,g.jsx)(cy.div,{style:a,children:(0,g.jsxs)("div",{className:"flex justify-around items-center",children:[(0,g.jsx)(cV,{rank:k}),(0,g.jsx)(cW,{accuracy:i})]})}),a=>(0,g.jsx)(cy.div,{style:a,children:(0,g.jsx)("div",{className:"w-full h-px bg-theme-text-dark/50"})}),a=>(0,g.jsx)(cy.div,{style:a,children:(0,g.jsx)(cR,{judgments:d})}),a=>(0,g.jsx)(cy.div,{style:a,children:(0,g.jsx)("div",{className:"w-full h-px bg-theme-text-dark/50"})}),a=>(0,g.jsx)(cy.div,{style:a,children:(0,g.jsx)(cT,{onRestart:m,onSelectMusic:n})})],{from:{opacity:0,transform:"translateY(20px)"},enter:{opacity:1,transform:"translateY(0px)"},trail:200});return(0,g.jsx)("div",{className:"min-h-screen bg-theme-bg flex items-center justify-center p-8",children:(0,g.jsxs)("div",{className:"bg-theme-bg/70 backdrop-blur-xl rounded-3xl p-12 border border-theme-text-dark/50 shadow-2xl max-w-3xl w-full space-y-8",children:[(0,g.jsx)("button",{onClick:a,className:"px-6 py-3 bg-theme-secondary text-white rounded-lg hover:bg-theme-secondary/80 transition-colors",children:"Back to Menu"}),(0,g.jsx)("h1",{className:"text-6xl font-black text-center bg-clip-text text-transparent bg-gradient-to-b from-theme-accent to-theme-secondary animate-pulse",children:"GAME CLEAR"}),o((a,b)=>b(a))]})})},cY=({label:a,value:b,min:c,max:d,step:e,onChange:f})=>(0,g.jsxs)("div",{className:"setting-item",children:[(0,g.jsxs)("label",{htmlFor:a,className:"text-2xl font-semibold mb-4 flex justify-between items-center",children:[(0,g.jsx)("span",{children:a}),(0,g.jsx)("span",{className:"text-3xl font-bold text-theme-secondary bg-theme-bg/50 px-4 py-1 rounded-lg",children:b})]}),(0,g.jsx)("input",{type:"range",id:a,min:c,max:d,step:e,value:b,onChange:f,className:"w-full h-3 bg-theme-text-light/10 rounded-full appearance-none cursor-pointer range-lg accent-theme-accent focus:outline-none focus:ring-2 focus:ring-theme-secondary focus:ring-opacity-50 transition-all duration-300"})]}),cZ=({label:a,value:b})=>(0,g.jsxs)("div",{className:"opacity-50",children:[(0,g.jsxs)("label",{className:"text-2xl font-semibold mb-4 flex justify-between items-center",children:[(0,g.jsx)("span",{children:a}),(0,g.jsx)("span",{className:"text-3xl font-bold text-theme-secondary bg-theme-bg/50 px-4 py-1 rounded-lg",children:b})]}),(0,g.jsx)("input",{type:"range",disabled:!0,className:"w-full h-3 bg-theme-text-light/10 rounded-full appearance-none cursor-not-allowed"}),(0,g.jsx)("p",{className:"text-sm text-right mt-2",children:"Coming Soon"})]}),c$=[{id:"noteSpeed",label:"Note Speed",min:100,max:1e3,step:50,enabled:!0}],c_=({onBack:a})=>{r(a=>a.setCurrentScene);let[b,c]=(0,h.useState)({});return(0,h.useEffect)(()=>{(async()=>{let a={};for(let b of c$)b.enabled&&(a[b.id]=await window.electron.getSetting(b.id));c(a)})()},[]),(0,g.jsxs)("div",{className:"min-h-screen bg-theme-bg text-theme-text-light flex flex-col items-center justify-center p-8",children:[(0,g.jsx)("div",{className:"absolute top-8 left-8",children:(0,g.jsx)("button",{onClick:a,className:"px-6 py-3 bg-theme-secondary text-white rounded-lg hover:bg-theme-secondary/80 transition-colors",children:"Back to Menu"})}),(0,g.jsxs)("div",{className:"w-full max-w-2xl bg-theme-bg/70 backdrop-blur-xl rounded-2xl shadow-2xl p-10 border border-theme-text-dark/50",children:[(0,g.jsx)("h1",{className:"text-5xl font-bold text-center mb-12 bg-clip-text text-transparent bg-gradient-to-r from-theme-secondary to-theme-accent animate-pulse",children:"Settings"}),(0,g.jsx)("div",{className:"space-y-10",children:c$.map(a=>a.enabled?(0,g.jsx)(cY,{label:a.label,value:b[a.id]??a.min??0,min:a.min??0,max:a.max??100,step:a.step??1,onChange:d=>((a,d)=>{c({...b,[a]:d}),window.electron.setSetting(a,d)})(a.id,parseInt(d.target.value,10))},a.id):(0,g.jsx)(cZ,{label:a.label,value:100},a.id))})]}),(0,g.jsx)("p",{className:"mt-8 text-sm text-theme-text-dark",children:"More settings will be available in future updates."})]})},c0=({onBack:a,onChartSelected:b})=>{let[c,d]=(0,h.useState)([]),[e,f]=(0,h.useState)(!1),[i,j]=(0,h.useState)("");(0,h.useEffect)(()=>{k()},[]);let k=async()=>{try{let a=await window.electron.getChartLibrary();d(a)}catch(a){console.error("Failed to load chart library:",a)}},l=async()=>{try{f(!0),j("íŒŒì¼ ì„ íƒ ì¤‘...");let a=await window.electron.selectOszFile();if(!a){j(""),f(!1);return}j("ì°¨íŠ¸ ìž„í¬íŠ¸ ì¤‘..."),await window.electron.importOszFile(a),j("ìž„í¬íŠ¸ ì™„ë£Œ!"),setTimeout(()=>j(""),2e3),await k()}catch(a){console.error("Failed to import .osz file:",a),j("ìž„í¬íŠ¸ ì‹¤íŒ¨: "+a.message),setTimeout(()=>j(""),3e3)}finally{f(!1)}},m=async(a,c)=>{try{f(!0),j("ì°¨íŠ¸ ë³€í™˜ ì¤‘...");let d=await window.electron.convertDifficultyToPinChart(a,c);b(d)}catch(a){console.error("Failed to convert difficulty:",a),j("ë³€í™˜ ì‹¤íŒ¨: "+a.message),setTimeout(()=>j(""),3e3)}finally{f(!1)}},n=async a=>{if(confirm("ì´ ì°¨íŠ¸ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))try{await window.electron.invoke("remove-chart-from-library",a),await k()}catch(a){console.error("Failed to remove chart:",a)}};return(0,g.jsxs)("div",{className:"min-h-screen bg-theme-bg-primary text-white p-8",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h1",{className:"text-4xl font-bold text-theme-primary mb-2",children:".osz ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬"}),(0,g.jsx)("p",{className:"text-theme-text-secondary",children:"osu! ë¹„íŠ¸ë§µ(.osz) íŒŒì¼ì„ ìž„í¬íŠ¸í•˜ì—¬ í”Œë ˆì´í•˜ì„¸ìš”"})]}),(0,g.jsx)("button",{onClick:a,className:"px-6 py-3 bg-theme-secondary text-white rounded-lg hover:bg-theme-secondary/80 transition-colors",children:"ë’¤ë¡œê°€ê¸°"})]}),(0,g.jsxs)("div",{className:"mb-8",children:[(0,g.jsx)("button",{onClick:l,disabled:e,className:"px-8 py-4 bg-theme-primary text-white rounded-lg hover:bg-theme-primary/80 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e?"ì²˜ë¦¬ ì¤‘...":".osz íŒŒì¼ ìž„í¬íŠ¸"}),i&&(0,g.jsx)("p",{className:"mt-2 text-theme-accent",children:i})]}),(0,g.jsx)("div",{className:"grid gap-6",children:0===c.length?(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("p",{className:"text-theme-text-secondary text-lg",children:"ìž„í¬íŠ¸ëœ ì°¨íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤."}),(0,g.jsx)("p",{className:"text-theme-text-secondary mt-2",children:".osz íŒŒì¼ì„ ìž„í¬íŠ¸í•˜ì—¬ ì‹œìž‘í•˜ì„¸ìš”."})]}):c.map(a=>(0,g.jsxs)("div",{className:"bg-theme-bg-secondary rounded-lg p-6 border border-theme-border",children:[(0,g.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-xl font-bold text-theme-primary",children:a.title}),(0,g.jsxs)("p",{className:"text-theme-text-secondary",children:["by ",a.artist," â€¢ mapped by ",a.creator]})]}),(0,g.jsx)("button",{onClick:()=>n(a.id),className:"px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700 transition-colors text-sm",children:"ì‚­ì œ"})]}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:a.difficulties.map((b,c)=>(0,g.jsxs)("button",{onClick:()=>m(a,c),disabled:e,className:"p-4 bg-theme-bg-primary rounded-lg border border-theme-border hover:border-theme-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-left",children:[(0,g.jsx)("div",{className:"font-semibold text-theme-primary",children:b.name}),(0,g.jsxs)("div",{className:"text-sm text-theme-text-secondary mt-1",children:["OD: ",b.overallDifficulty.toFixed(1)," â€¢ AR: ",b.approachRate.toFixed(1)]}),(0,g.jsxs)("div",{className:"text-sm text-theme-text-secondary",children:[b.noteCount," ë…¸íŠ¸"]})]},c))})]},a.id))})]})},c1=()=>{let[a,b]=(0,h.useState)("Start"),[c,d]=(0,h.useState)(null),e=a=>{b(a)},f=a=>{d(a),b("Game")};return(0,g.jsx)("div",{children:(()=>{switch(a){case"Start":default:return(0,g.jsx)(l,{onNavigate:e});case"Select":return(0,g.jsx)(t,{onBack:()=>e("Start"),onStartGame:f});case"Game":return c?(0,g.jsx)(cO,{selectedChart:c,onBack:()=>e("Select")}):(0,g.jsx)(l,{onNavigate:e});case"Finish":return(0,g.jsx)(cX,{onBack:()=>e("Start")});case"Settings":return(0,g.jsx)(c_,{onBack:()=>e("Start")});case"OszImport":return(0,g.jsx)(c0,{onBack:()=>e("Start"),onChartSelected:f})}})()})};function c2(){return(0,g.jsx)(c1,{})}},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},1208:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(5459).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/user/prg/src/renderer/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/user/prg/src/renderer/app/page.tsx","default")},1971:()=>{},2323:()=>{},2550:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,8671,23)),Promise.resolve().then(c.t.bind(c,6542,23)),Promise.resolve().then(c.t.bind(c,8248,23)),Promise.resolve().then(c.t.bind(c,9743,23)),Promise.resolve().then(c.t.bind(c,6231,23)),Promise.resolve().then(c.t.bind(c,959,23)),Promise.resolve().then(c.t.bind(c,2041,23)),Promise.resolve().then(c.t.bind(c,5094,23)),Promise.resolve().then(c.t.bind(c,7487,23))},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3581:()=>{},3707:(a,b,c)=>{"use strict";c(2323);var d=c(1768),e=function(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}(d),f="undefined"!=typeof process&&process.env&&!0,g=function(a){return"[object String]"===Object.prototype.toString.call(a)},h=function(){function a(a){var b=void 0===a?{}:a,c=b.name,d=void 0===c?"stylesheet":c,e=b.optimizeForSpeed,h=void 0===e?f:e;i(g(d),"`name` must be a string"),this._name=d,this._deletedRulePlaceholder="#"+d+"-deleted-rule____{}",i("boolean"==typeof h,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=h,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0,this._nonce=null}var b,c=a.prototype;return c.setOptimizeForSpeed=function(a){i("boolean"==typeof a,"`setOptimizeForSpeed` accepts a boolean"),i(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=a,this.inject()},c.isOptimizeForSpeed=function(){return this._optimizeForSpeed},c.inject=function(){var a=this;i(!this._injected,"sheet already injected"),this._injected=!0,this._serverSheet={cssRules:[],insertRule:function(b,c){return"number"==typeof c?a._serverSheet.cssRules[c]={cssText:b}:a._serverSheet.cssRules.push({cssText:b}),c},deleteRule:function(b){a._serverSheet.cssRules[b]=null}}},c.getSheetForTag=function(a){if(a.sheet)return a.sheet;for(var b=0;b<document.styleSheets.length;b++)if(document.styleSheets[b].ownerNode===a)return document.styleSheets[b]},c.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},c.insertRule=function(a,b){return i(g(a),"`insertRule` accepts only strings"),"number"!=typeof b&&(b=this._serverSheet.cssRules.length),this._serverSheet.insertRule(a,b),this._rulesCount++},c.replaceRule=function(a,b){this._optimizeForSpeed;var c=this._serverSheet;if(b.trim()||(b=this._deletedRulePlaceholder),!c.cssRules[a])return a;c.deleteRule(a);try{c.insertRule(b,a)}catch(d){f||console.warn("StyleSheet: illegal rule: \n\n"+b+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),c.insertRule(this._deletedRulePlaceholder,a)}return a},c.deleteRule=function(a){this._serverSheet.deleteRule(a)},c.flush=function(){this._injected=!1,this._rulesCount=0,this._serverSheet.cssRules=[]},c.cssRules=function(){return this._serverSheet.cssRules},c.makeStyleTag=function(a,b,c){b&&i(g(b),"makeStyleTag accepts only strings as second parameter");var d=document.createElement("style");this._nonce&&d.setAttribute("nonce",this._nonce),d.type="text/css",d.setAttribute("data-"+a,""),b&&d.appendChild(document.createTextNode(b));var e=document.head||document.getElementsByTagName("head")[0];return c?e.insertBefore(d,c):e.appendChild(d),d},b=[{key:"length",get:function(){return this._rulesCount}}],function(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}(a.prototype,b),a}();function i(a,b){if(!a)throw Error("StyleSheet: "+b+".")}var j=function(a){for(var b=5381,c=a.length;c;)b=33*b^a.charCodeAt(--c);return b>>>0},k={};function l(a,b){if(!b)return"jsx-"+a;var c=String(b),d=a+c;return k[d]||(k[d]="jsx-"+j(a+"-"+c)),k[d]}function m(a,b){var c=a+(b=b.replace(/\/style/gi,"\\/style"));return k[c]||(k[c]=b.replace(/__jsx-style-dynamic-selector/g,a)),k[c]}var n=function(){function a(a){var b=void 0===a?{}:a,c=b.styleSheet,d=void 0===c?null:c,e=b.optimizeForSpeed,f=void 0!==e&&e;this._sheet=d||new h({name:"styled-jsx",optimizeForSpeed:f}),this._sheet.inject(),d&&"boolean"==typeof f&&(this._sheet.setOptimizeForSpeed(f),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var b=a.prototype;return b.add=function(a){var b=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(a.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed());var c=this.getIdAndRules(a),d=c.styleId,e=c.rules;if(d in this._instancesCounts){this._instancesCounts[d]+=1;return}var f=e.map(function(a){return b._sheet.insertRule(a)}).filter(function(a){return -1!==a});this._indices[d]=f,this._instancesCounts[d]=1},b.remove=function(a){var b=this,c=this.getIdAndRules(a).styleId;if(function(a,b){if(!a)throw Error("StyleSheetRegistry: "+b+".")}(c in this._instancesCounts,"styleId: `"+c+"` not found"),this._instancesCounts[c]-=1,this._instancesCounts[c]<1){var d=this._fromServer&&this._fromServer[c];d?(d.parentNode.removeChild(d),delete this._fromServer[c]):(this._indices[c].forEach(function(a){return b._sheet.deleteRule(a)}),delete this._indices[c]),delete this._instancesCounts[c]}},b.update=function(a,b){this.add(b),this.remove(a)},b.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},b.cssRules=function(){var a=this,b=this._fromServer?Object.keys(this._fromServer).map(function(b){return[b,a._fromServer[b]]}):[],c=this._sheet.cssRules();return b.concat(Object.keys(this._indices).map(function(b){return[b,a._indices[b].map(function(a){return c[a].cssText}).join(a._optimizeForSpeed?"":"\n")]}).filter(function(a){return!!a[1]}))},b.styles=function(a){var b,c;return b=this.cssRules(),void 0===(c=a)&&(c={}),b.map(function(a){var b=a[0],d=a[1];return e.default.createElement("style",{id:"__"+b,key:"__"+b,nonce:c.nonce?c.nonce:void 0,dangerouslySetInnerHTML:{__html:d}})})},b.getIdAndRules=function(a){var b=a.children,c=a.dynamic,d=a.id;if(c){var e=l(d,c);return{styleId:e,rules:Array.isArray(b)?b.map(function(a){return m(e,a)}):[m(e,b)]}}return{styleId:l(d),rules:Array.isArray(b)?b:[b]}},b.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(a,b){return a[b.id.slice(2)]=b,a},{})},a}(),o=d.createContext(null);o.displayName="StyleSheetContext";e.default.useInsertionEffect||e.default.useLayoutEffect;var p=void 0;function q(a){var b=p||d.useContext(o);return b&&b.add(a),null}q.dynamic=function(a){return a.map(function(a){return l(a[0],a[1])}).join(" ")},b.style=q},3873:a=>{"use strict";a.exports=require("path")},5020:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>J,handler:()=>L,pages:()=>I,routeModule:()=>K,tree:()=>H});var d=c(3653),e=c(7714),f=c(5250),g=c(7587),h=c(2369),i=c(1889),j=c(6232),k=c(2841),l=c(6537),m=c(6027),n=c(8559),o=c(5928),p=c(9374),q=c(5971),r=c(261),s=c(9898),t=c(2967),u=c(6713),v=c(139),w=c(4248),x=c(9580),y=c(7749),z=c(3123),A=c(9745),B=c(6439),C=c(8671),D=c.n(C),E=c(8283),F=c(9818),G={};for(let a in E)0>["default","tree","pages","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(G[a]=()=>E[a]);c.d(b,G);let H=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,1208)),"/Users/user/prg/src/renderer/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(c.bind(c,6035)),"/Users/user/prg/src/renderer/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,8671,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,7983,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,5034,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,4693,23)),"next/dist/client/components/builtin/unauthorized.js"]}],I=["/Users/user/prg/src/renderer/app/page.tsx"],J={require:c,loadChunk:()=>Promise.resolve()},K=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:H},distDir:".next",relativeProjectDir:"src/renderer"});async function L(a,b,d){var C;let G="/page";"/index"===G&&(G="/");let M=(0,h.getRequestMeta)(a,"postponed"),N=(0,h.getRequestMeta)(a,"minimalMode"),O=await K.prepare(a,b,{srcPage:G,multiZoneDraftMode:!1});if(!O)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:P,query:Q,params:R,parsedUrl:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,interceptionRoutePatterns:ae}=O,af=S.pathname||"/",ag=(0,r.normalizeAppPath)(G),{isOnDemandRevalidate:ah}=O,ai=K.match(af,$),aj=!!$.routes[aa],ak=!!(ai||aj||$.routes[ag]),al=a.headers["user-agent"]||"",am=(0,u.getBotType)(al),an=(0,p.isHtmlBotRequest)(a),ao=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ap=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],aq=(0,s.getIsPossibleServerAction)(a),ar=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",as=!1,at=!1,au=ar?M:void 0,av=ar&&ap&&!ao,aw=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),ax=!al||(0,p.shouldServeStreamingMetadata)(al,ad.htmlLimitedBots);an&&ar&&(ak=!1,ax=!1);let ay=!0===K.isDev||!ak||"string"==typeof M||av,az=an&&ar,aA=null;_||!ak||ay||aq||au||av||(aA=aa);let aB=aA;!aB&&K.isDev&&(aB=aa),K.isDev||_||!ak||!ap||av||(0,k.d)(a.headers);let aC={...E,tree:H,pages:I,GlobalError:D(),handler:L,routeModule:K,__next_app__:J};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:G,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aD=a.method||"GET",aE=(0,g.getTracer)(),aF=aE.getActiveScopeSpan();try{let f=K.getVaryHeader(aa,ae);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return K.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=aE.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${aD} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aD} ${a.url}`)})},m=async({span:e,postponed:f,fallbackRouteParams:g})=>{let i={query:Q,params:R,page:ag,sharedContext:{buildId:P},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aC,Component:(0,j.T)(aC),params:R,routeModule:K,page:G,postponed:f,shouldWaitOnAllReady:az,serveStreamingMetadata:ax,supportsDynamicResponse:"string"==typeof f||ay,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setIsrStatus:null==ac?void 0:ac.setIsrStatus,dir:c(3873).join(process.cwd(),K.relativeProjectDir),isDraftMode:_,isRevalidate:ak&&!f&&!av,botType:am,isOnDemandRevalidate:ah,isPossibleServerAction:aq,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,devtoolSegmentExplorer:ad.experimental.devtoolSegmentExplorer,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:ad.experimental.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isRevalidate:!0,isDebugDynamicAccesses:as}:{},experimental:{isRoutePPREnabled:ar,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,cacheComponents:!!ad.experimental.cacheComponents,clientSegmentCache:!!ad.experimental.clientSegmentCache,clientParamParsing:!!ad.experimental.clientParamParsing,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[]},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>K.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:K.isDev}},l=await k(e,i),{metadata:m}=l,{cacheControl:n,headers:o={},fetchTags:p}=m;if(p&&(o[y.NEXT_CACHE_TAGS_HEADER]=p),a.fetchMetrics=m.fetchMetrics,ak&&(null==n?void 0:n.revalidate)===0&&!K.isDev&&!ar){let a=m.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:l,headers:o,rscData:m.flightData,postponed:m.postponed,status:m.statusCode,segmentData:m.segmentData},cacheControl:n}},o=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i})=>{let j,k=!1===K.isDev,l=c||b.writableEnded;if(ah&&ab&&!f&&!N)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(j=(0,w.parseFallbackField)(ai.fallback)),j===w.FallbackMode.PRERENDER&&(0,u.isBot)(al)&&(!ar||an)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(j!==w.FallbackMode.NOT_FOUND||f)&&(j=w.FallbackMode.BLOCKING_STATIC_RENDER),!N&&j!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aB&&!l&&!_&&T&&(k||!aj)){let b;if((k||ai)&&j===w.FallbackMode.NOT_FOUND)throw new B.NoFallbackError;if(ar&&!ap){let c="string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:k?ag:null;if(b=await K.handleResponse({cacheKey:c,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:ar,responseGenerator:async()=>m({span:i,postponed:void 0,fallbackRouteParams:k||at?(0,n.u)(ag):null}),waitUntil:d.waitUntil}),null===b)return null;if(b)return delete b.cacheControl,b}}let o=ah||g||!au?void 0:au;if(as&&void 0!==o)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let p=T&&ar&&((0,h.getRequestMeta)(a,"renderFallbackShell")||at)?(0,n.u)(af):null;return m({span:i,postponed:o,fallbackRouteParams:p})},p=async c=>{var f,g,i,j,k;let l,n=await K.handleResponse({cacheKey:aA,responseGenerator:a=>o({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:ar,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),K.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!n){if(aA)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=n.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=n.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let p="string"==typeof n.value.postponed;ak&&!av&&(!p||ao)&&(N||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":n.isMiss?"MISS":n.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=n;if(au)l={revalidate:0,expire:void 0};else if(N&&ap&&!ao&&ar)l={revalidate:0,expire:void 0};else if(!K.isDev)if(_)l={revalidate:0,expire:void 0};else if(ak){if(n.cacheControl)if("number"==typeof n.cacheControl.revalidate){if(n.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${n.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:n.cacheControl.revalidate,expire:(null==(j=n.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(n.cacheControl=l,"string"==typeof aw&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];N&&ak&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(aw);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:n.cacheControl}))}let r=(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r({...n,value:{...n.value,kind:"PAGE"}},{url:(0,h.getRequestMeta)(a,"initURL")}))return null;if(p&&au)throw Object.defineProperty(Error("Invariant: postponed state should not be present on a resume request"),"__NEXT_ERROR_CODE",{value:"E396",enumerable:!1,configurable:!0});if(q.headers){let a={...q.headers};for(let[c,d]of(N&&ak||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(N&&ak&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ap&&ar||(b.statusCode=q.status),!N&&q.status&&F.RedirectStatusCode[q.status]&&ap&&(b.statusCode=200),p&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ap&&!_){if(void 0===q.rscData){if(q.postponed)throw Object.defineProperty(Error("Invariant: Expected postponed to be undefined"),"__NEXT_ERROR_CODE",{value:"E372",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:av?{revalidate:0,expire:void 0}:n.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:n.cacheControl})}let u=q.html;if(!p||N||ap)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:n.cacheControl});if(as)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),m({span:c,postponed:q.postponed,fallbackRouteParams:null}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aF)return await aE.withPropagatedContext(a.headers,()=>aE.trace(i.BaseServerSpan.handleRequest,{spanName:`${aD} ${a.url}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aD,"http.target":a.url}},p));await p(aF)}catch(b){throw aF||b instanceof B.NoFallbackError||await K.onRequestError(a,b,{routerKind:"App Router",routePath:G,routeType:"render",revalidateReason:(0,f.c)({isRevalidate:ak,isOnDemandRevalidate:ah})},ac),b}}},6035:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>f,metadata:()=>e});var d=c(5939);c(1971);let e={title:"Prg",description:"Pin Rhythm Game"};function f({children:a}){return(0,d.jsx)("html",{lang:"ko",children:(0,d.jsx)("body",{children:a})})}},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},7194:(a,b,c)=>{"use strict";a.exports=c(3707).style},7822:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,8365,23)),Promise.resolve().then(c.t.bind(c,4596,23)),Promise.resolve().then(c.t.bind(c,6186,23)),Promise.resolve().then(c.t.bind(c,7805,23)),Promise.resolve().then(c.t.bind(c,7561,23)),Promise.resolve().then(c.t.bind(c,7569,23)),Promise.resolve().then(c.t.bind(c,2747,23)),Promise.resolve().then(c.t.bind(c,6676,23)),Promise.resolve().then(c.bind(c,7225))},8317:()=>{},8330:(a,b,c)=>{Promise.resolve().then(c.bind(c,790))},8354:a=>{"use strict";a.exports=require("util")},9121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[869],()=>b(b.s=5020));module.exports=c})();