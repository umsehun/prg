(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[833],{387:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(2068).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},2695:(e,r,t)=>{"use strict";t.d(r,{a:()=>s});var l=t(7620);function s(){let[e,r]=(0,l.useState)([]),[t,s]=(0,l.useState)(!0),[a,i]=(0,l.useState)(null),[c,n]=(0,l.useState)(!1),o=(0,l.useCallback)(async()=>{console.log("\uD83D\uDD04 refreshLibrary called");try{var e,t,l,a;s(!0),i(null),console.log("\uD83D\uDD0D Checking window.electronAPI:",{hasWindow:!0,hasElectronAPI:!!window.electronAPI,hasCharts:!!(null==(e=window.electronAPI)?void 0:e.charts),hasOsz:!!(null==(t=window.electronAPI)?void 0:t.osz),apis:window.electronAPI?Object.keys(window.electronAPI):"undefined"});let c=[];if(window.electronAPI){let e=window.electronAPI,r=null;if(null==(l=e.charts)?void 0:l.getLibrary){console.log("\uD83D\uDCDE Calling electronAPI.charts.getLibrary()");try{let t=await e.charts.getLibrary();console.log("\uD83D\uDCE8 Charts API Response:",t),t&&t.success&&Array.isArray(t.charts)?r=t.charts:Array.isArray(t)&&(r=t)}catch(e){console.warn("⚠️ Charts API failed:",e)}}if(!r&&(null==(a=e.osz)?void 0:a.getLibrary)){console.log("\uD83D\uDCDE Fallback to electronAPI.osz.getLibrary()");try{let t=await e.osz.getLibrary();console.log("\uD83D\uDCE8 OSZ API Response:",t),t&&t.success&&Array.isArray(t.charts)?r=t.charts:Array.isArray(t)&&(r=t)}catch(e){console.warn("⚠️ OSZ API failed:",e)}}r&&Array.isArray(r)&&(console.log("✅ Found ".concat(r.length," real charts")),c=r.map(e=>{let r={easy:1,normal:3,hard:5,expert:7};if(e.difficulties&&Array.isArray(e.difficulties)){let t=e.difficulties;if(t.length>0){let e=t.reduce((e,r)=>e+(r.overallDifficulty||5),0)/t.length,l=Math.round(e);r={easy:Math.max(1,l-2),normal:l,hard:Math.min(10,l+2),expert:Math.min(10,l+4)}}}return{id:e.id,title:e.title,artist:e.artist,audioFile:e.audioFilename||e.audioPath||e.audioFile||"",backgroundImage:e.backgroundFilename||e.backgroundImage||"",difficulty:r,bpm:e.bpm||120,duration:e.duration||18e4,filePath:e.filePath||"",notes:e.notes||[]}}))}r(c),n(!1),c.length>0?(console.log("✅ Using ".concat(c.length," real songs with actual OSZ data")),console.log("\uD83D\uDCCA Sample song:",c[0])):(console.warn("⚠️ No real songs found"),i("곡 라이브러리가 비어있습니다. OSZ 파일을 확인해주세요."))}catch(e){console.error("\uD83D\uDCA5 Failed to load song library:",e),i("곡 라이브러리를 불러오는 데 실패했습니다"),r([])}finally{s(!1)}},[]),d=(0,l.useCallback)(async e=>{try{var r;if(i(null),null==(r=window.electronAPI)||!r.osz)return i("Electron IPC를 사용할 수 없습니다"),!1;{let r=await window.electronAPI.osz.importFromPath(e);if(r.success)return await o(),!0;return i(r.error||"OSZ 파일 가져오기에 실패했습니다"),!1}}catch(e){return console.error("Failed to import OSZ:",e),i("OSZ 파일 가져오기 중 오류가 발생했습니다"),!1}},[o]),h=(0,l.useCallback)(async e=>{try{var r;if(i(null),null==(r=window.electronAPI)||!r.osz)return i("Electron IPC를 사용할 수 없습니다"),!1;{let r=await e.arrayBuffer(),t=new Uint8Array(r),l=await window.electronAPI.osz.importFromBuffer({name:e.name,buffer:t});if(l.success)return await o(),!0;return i(l.error||"OSZ 파일 가져오기에 실패했습니다"),!1}}catch(e){return console.error("Failed to import file:",e),i("파일 가져오기 중 오류가 발생했습니다"),!1}},[o]),u=(0,l.useCallback)(r=>e.find(e=>e.id===r),[e]);return(0,l.useEffect)(()=>{o()},[o]),{songs:e,loading:t,error:a,refreshLibrary:o,importOsz:d,getSong:u,importFromFile:h,hasDummyData:c}}},4624:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(2068).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},6345:(e,r,t)=>{Promise.resolve().then(t.bind(t,9895))},8937:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});let l=(0,t(2068).A)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]])},9895:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>p});var l=t(4568),s=t(7620),a=t(6845),i=t(5239),c=t(4751),n=t(387),o=t(8937),d=t(4624),h=t(2695),u=t(3842),m=t(9664),x=t.n(m);function p(){let{songs:e,loading:r}=(0,h.a)(),{startGame:t}=(0,u.v)(),[m,p]=(0,s.useState)(null),f=async()=>{m&&await t(m,"pin")&&(window.location.href="/pin")};return(0,l.jsx)("div",{className:"min-h-full bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 p-6 pt-20",children:(0,l.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,l.jsx)(x(),{href:"/",children:(0,l.jsxs)(a.$,{variant:"ghost",size:"sm",className:"text-slate-300 hover:text-white",children:[(0,l.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"돌아가기"]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"핀 모드"}),(0,l.jsx)("p",{className:"text-slate-400 text-lg",children:"회전하는 타겟에 핀을 던지며 리듬을 즐기세요"})]})]}),(0,l.jsx)(i.Zp,{className:"mb-8 bg-gradient-to-r from-purple-900/30 to-pink-900/30 border-purple-500/50",children:(0,l.jsx)(i.aR,{children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center",children:(0,l.jsx)(n.A,{className:"w-8 h-8 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)(i.ZB,{className:"text-white text-2xl",children:"핀 모드"}),(0,l.jsx)(i.BT,{className:"text-purple-200 text-lg",children:"회전하는 타겟에 핀을 던지며 리듬을 즐기는 게임플레이"})]})]})})}),(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-white mb-4",children:"곡 선택"}),r?(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),(0,l.jsx)("p",{className:"text-slate-400 mt-4",children:"곡 목록을 불러오는 중..."})]}):0===e.length?(0,l.jsx)(i.Zp,{className:"bg-slate-800/50 border-slate-700",children:(0,l.jsxs)(i.Wu,{className:"py-12 text-center",children:[(0,l.jsx)(o.A,{className:"w-16 h-16 text-slate-500 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-slate-300 mb-2",children:"곡이 없습니다"}),(0,l.jsx)("p",{className:"text-slate-500 mb-6",children:".osz 파일을 가져와서 게임을 시작하세요"}),(0,l.jsx)(x(),{href:"/select",children:(0,l.jsx)(a.$,{className:"bg-purple-500 hover:bg-purple-600",children:"곡 라이브러리로 가기"})})]})}):(0,l.jsx)("div",{className:"grid gap-4",children:e.map(e=>(0,l.jsx)(i.Zp,{className:"cursor-pointer transition-all duration-300 ".concat((null==m?void 0:m.id)===e.id?"bg-purple-900/50 border-purple-500 shadow-lg shadow-purple-500/25":"bg-slate-800/50 border-slate-700 hover:border-purple-500/50 hover:bg-slate-700/50"),onClick:()=>{p(e)},children:(0,l.jsx)(i.Wu,{className:"p-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-6",children:[(0,l.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,l.jsx)(o.A,{className:"w-8 h-8 text-white"})}),(0,l.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,l.jsx)("h3",{className:"text-xl font-semibold text-white mb-1 truncate",children:e.title}),(0,l.jsx)("p",{className:"text-slate-400 mb-2 truncate",children:e.artist}),(0,l.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[(0,l.jsxs)("div",{className:"flex items-center gap-1",children:[(0,l.jsx)(d.A,{className:"w-4 h-4"}),(e=>{let r=Math.floor(e/60);return"".concat(r,":").concat((e%60).toString().padStart(2,"0"))})(e.duration)]}),(0,l.jsxs)("div",{children:["BPM: ",e.bpm]}),(0,l.jsxs)("div",{children:["난이도: ★",e.difficulty.easy]})]})]}),(null==m?void 0:m.id)===e.id&&(0,l.jsx)("div",{className:"flex-shrink-0",children:(0,l.jsx)("div",{className:"w-6 h-6 bg-purple-500 rounded-full flex items-center justify-center",children:(0,l.jsx)("div",{className:"w-2 h-2 bg-white rounded-full"})})})]})})},e.id))})]}),m&&(0,l.jsx)("div",{className:"text-center",children:(0,l.jsxs)(a.$,{size:"lg",className:"bg-purple-500 hover:bg-purple-600 text-white px-12 py-4 text-lg",onClick:f,children:[(0,l.jsx)(n.A,{className:"w-6 h-6 mr-2"}),"핀 모드 시작"]})})]})})}}},e=>{e.O(0,[28,664,110,587,18,358],()=>e(e.s=6345)),_N_E=e.O()}]);