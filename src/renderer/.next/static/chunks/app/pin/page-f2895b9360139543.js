(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[34],{387:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(2068).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},826:(e,t,s)=>{"use strict";s.d(t,{cn:()=>l});var a=s(2902),r=s(3714);function l(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,r.QP)((0,a.$)(t))}},1454:(e,t,s)=>{"use strict";s.d(t,{v:()=>r});var a=s(7620);function r(){let[e,t]=(0,a.useState)(null),[s,r]=(0,a.useState)("osu"),[l,i]=(0,a.useState)("idle"),[c,n]=(0,a.useState)({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}}),o=(0,a.useRef)(0),d="playing"===l,m=(0,a.useCallback)(async(e,s)=>{try{var a;if(i("loading"),window.electronAPI){if(console.log("\uD83D\uDD0C Electron API available:",Object.keys(window.electronAPI)),!window.electronAPI.game)return console.error("❌ Game API not available in electronAPI"),i("idle"),!1;let a={id:e.id,title:e.title,artist:e.artist,difficulty:"Normal",audioPath:e.audioFile,backgroundPath:e.backgroundImage,bpm:e.bpm,duration:e.duration};console.log("\uD83C\uDFAE Starting game with chartData:",a);let l=await window.electronAPI.game.start({chartData:a,gameMode:"pin"===s?"osu":s,mods:[]});if(console.log("\uD83C\uDFAE Game start response:",l),l&&"object"==typeof l&&"success"in l&&l.success)return t(e),r(s),i("playing"),o.current=Date.now(),f(),!0;return console.error("❌ Game start failed:",l),i("idle"),!1}return console.error("❌ Electron API not available - window:","object","electronAPI:",!!(null==(a=window)?void 0:a.electronAPI)),console.warn("⚡ Starting mock game for development"),t(e),r(s),i("playing"),o.current=Date.now(),f(),!0}catch(e){return console.error("Failed to start game:",e),i("idle"),!1}},[]),x=(0,a.useCallback)(async()=>{try{var e;(null==(e=window.electronAPI)?void 0:e.game)&&await window.electronAPI.game.stop(),i("idle"),t(null),r("pin")}catch(e){console.error("Failed to stop game:",e)}},[]),u=(0,a.useCallback)(async()=>{try{if("playing"===l){var e;(null==(e=window.electronAPI)?void 0:e.game)&&await window.electronAPI.game.pause(),i("paused")}}catch(e){console.error("Failed to pause game:",e)}},[l]),h=(0,a.useCallback)(async()=>{try{if("paused"===l){var e;(null==(e=window.electronAPI)?void 0:e.game)&&await window.electronAPI.game.resume(),i("playing")}}catch(e){console.error("Failed to resume game:",e)}},[l]),g=(0,a.useCallback)(e=>{n(t=>{let s={...t,...e},a=s.hits.perfect+s.hits.great+s.hits.good+s.hits.miss;if(a>0){let e=s.hits.perfect+s.hits.great+s.hits.good;s.accuracy=Math.round(e/a*100)}return s})},[]),p=(0,a.useCallback)(async()=>{try{var t,s;if(!e||"finished"!==l)return!1;let a={songId:e.id,score:c.score,accuracy:c.accuracy,combo:c.combo,rank:(s=c.accuracy)>=97?"SS":s>=90?"S":s>=80?"A":s>=70?"B":s>=60?"C":s>=50?"D":"F",timestamp:Date.now()};if(null==(t=window.electronAPI)||!t.game)return console.log("Mock score submission:",a),!0;{let e=window.electronAPI.game;if(e.submitScore)return await e.submitScore(a);return console.log("Score data prepared:",a),!0}}catch(e){return console.error("Failed to submit score:",e),!1}},[e,l,c]),f=(0,a.useCallback)(()=>{n({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}})},[]);return{currentSong:e,gameMode:s,gameState:l,stats:c,isPlaying:d,startGame:m,stopGame:x,pauseGame:u,resumeGame:h,updateStats:g,submitScore:p,resetStats:f}}},2292:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(2068).A)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]])},5239:(e,t,s)=>{"use strict";s.d(t,{BT:()=>o,Wu:()=>d,ZB:()=>n,Zp:()=>i,aR:()=>c});var a=s(4568),r=s(7620),l=s(826);let i=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...r})});i.displayName="Card";let c=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...r})});c.displayName="CardHeader";let n=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("h3",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",s),...r})});n.displayName="CardTitle";let o=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...r})});o.displayName="CardDescription";let d=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",s),...r})});d.displayName="CardContent",r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",s),...r})}).displayName="CardFooter"},5464:(e,t,s)=>{Promise.resolve().then(s.bind(s,7250))},6845:(e,t,s)=>{"use strict";s.d(t,{$:()=>o});var a=s(4568),r=s(7620),l=s(6118),i=s(4616),c=s(826);let n=(0,i.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",game:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-game hover:shadow-game/80 transform hover:scale-105 transition-all duration-200",perfect:"bg-game-perfect text-white shadow-lg hover:bg-game-perfect/90 animate-pulse-game",great:"bg-game-great text-white shadow-lg hover:bg-game-great/90",good:"bg-game-good text-white shadow-lg hover:bg-game-good/90",miss:"bg-game-miss text-white shadow-lg hover:bg-game-miss/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-9 w-9",game:"h-12 px-6 py-3 text-base font-semibold"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:s,variant:r,size:i,asChild:o=!1,...d}=e,m=o?l.DX:"button";return(0,a.jsx)(m,{className:(0,c.cn)(n({variant:r,size:i,className:s})),ref:t,...d})});o.displayName="Button"},7250:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var a=s(4568),r=s(7620),l=s(6845),i=s(5239),c=s(387),n=s(4751),o=s(2292),d=s(8756);let m=(0,s(2068).A)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var x=s(8997),u=s(1454),h=s(9664),g=s.n(h);function p(){let{currentSong:e,gameState:t,stats:s,isPlaying:h,pauseGame:p,resumeGame:f,stopGame:b,updateStats:w}=(0,u.v)(),[y,v]=(0,r.useState)(0),[j,N]=(0,r.useState)([]),[A,k]=(0,r.useState)(2);(0,r.useEffect)(()=>{if("playing"===t){let e=setInterval(()=>{v(e=>(e+A)%360)},16);return()=>clearInterval(e)}},[t,A]);let P=(0,r.useCallback)(()=>{if("playing"===t&&e){let e={id:Date.now(),angle:y,timestamp:Date.now()};N(t=>[...t,e]);let t=10*s.combo;w({score:s.score+(100+t),combo:s.combo+1,hits:{...s.hits,perfect:s.hits.perfect+1}}),s.combo>0&&s.combo%10==0&&k(e=>Math.min(e+.2,5))}},[t,e,y,s,w]);return((0,r.useEffect)(()=>{let e=e=>{"Space"===e.code&&(e.preventDefault(),P())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[P]),e)?(0,a.jsx)("div",{className:"min-h-full bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 p-4 pt-20",children:(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(g(),{href:"/play",children:(0,a.jsxs)(l.$,{variant:"ghost",size:"sm",className:"text-slate-300 hover:text-white",children:[(0,a.jsx)(n.A,{className:"w-4 h-4 mr-2"}),"돌아가기"]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:e.title}),(0,a.jsx)("p",{className:"text-slate-400",children:e.artist})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.$,{onClick:()=>{"playing"===t?p():"paused"===t&&f()},variant:"outline",size:"sm",className:"border-slate-600 text-slate-300",disabled:"idle"===t,children:"playing"===t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Pause"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Resume"]})}),(0,a.jsxs)(l.$,{onClick:()=>{b(),N([]),v(0),k(2)},variant:"outline",size:"sm",className:"border-red-600 text-red-300 hover:bg-red-900/20",disabled:"idle"===t,children:[(0,a.jsx)(m,{className:"w-4 h-4 mr-2"}),"정지"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-8",children:[(0,a.jsx)(i.Zp,{className:"bg-slate-800/50 border-slate-700",children:(0,a.jsxs)(i.Wu,{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-white mb-1",children:s.score.toLocaleString()}),(0,a.jsx)("div",{className:"text-slate-400 text-sm",children:"점수"})]})}),(0,a.jsx)(i.Zp,{className:"bg-slate-800/50 border-slate-700",children:(0,a.jsxs)(i.Wu,{className:"text-center py-4",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-purple-400 mb-1",children:[s.combo,"x"]}),(0,a.jsx)("div",{className:"text-slate-400 text-sm",children:"콤보"})]})}),(0,a.jsx)(i.Zp,{className:"bg-slate-800/50 border-slate-700",children:(0,a.jsxs)(i.Wu,{className:"text-center py-4",children:[(0,a.jsxs)("div",{className:"text-3xl font-bold text-green-400 mb-1",children:[s.accuracy,"%"]}),(0,a.jsx)("div",{className:"text-slate-400 text-sm",children:"정확도"})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center min-h-[500px]",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"w-80 h-80 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center shadow-2xl",style:{transform:"rotate(".concat(y,"deg)"),transition:"paused"===t?"none":"transform 0.016s linear"},children:[(0,a.jsx)("div",{className:"w-72 h-72 rounded-full bg-slate-900 flex items-center justify-center",children:(0,a.jsx)(c.A,{className:"w-32 h-32 text-white opacity-80"})}),j.map(e=>(0,a.jsx)("div",{className:"absolute w-1 h-8 bg-yellow-400 origin-bottom",style:{transform:"rotate(".concat(e.angle,"deg) translateY(-140px)"),transformOrigin:"50% 140px"}},e.id))]}),(0,a.jsx)("div",{className:"absolute top-1/2 left-1/2 w-1 h-20 bg-red-500 transform -translate-x-1/2 -translate-y-full opacity-80"})]}),(0,a.jsxs)(l.$,{onClick:P,disabled:"playing"!==t,className:"mt-8 px-12 py-4 text-xl bg-purple-500 hover:bg-purple-600 text-white disabled:opacity-50",children:[(0,a.jsx)(x.A,{className:"w-6 h-6 mr-2"}),"핀 던지기 (스페이스)"]})]}),(0,a.jsxs)("div",{className:"lg:w-80 space-y-4",children:[(0,a.jsxs)(i.Zp,{className:"bg-slate-800/50 border-slate-700",children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-white text-lg",children:"게임 방법"})}),(0,a.jsxs)(i.Wu,{className:"space-y-2 text-slate-300 text-sm",children:[(0,a.jsx)("p",{children:'• 스페이스 키 또는 "핀 던지기" 버튼을 눌러 핀을 발사하세요'}),(0,a.jsx)("p",{children:"• 회전하는 타겟을 조준하세요"}),(0,a.jsx)("p",{children:"• 콤보를 쌓아 더 높은 점수를 획득하세요"}),(0,a.jsx)("p",{children:"• 콤보가 증가할수록 속도가 빨라집니다!"})]})]}),(0,a.jsxs)(i.Zp,{className:"bg-slate-800/50 border-slate-700",children:[(0,a.jsx)(i.aR,{children:(0,a.jsx)(i.ZB,{className:"text-white text-lg",children:"게임 상태"})}),(0,a.jsxs)(i.Wu,{className:"space-y-2 text-slate-300 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"상태:"}),(0,a.jsx)("span",{className:"font-medium ".concat("playing"===t?"text-green-400":"paused"===t?"text-yellow-400":"text-slate-400"),children:"playing"===t?"플레이 중":"paused"===t?"일시정지":"idle"===t?"대기":t})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"속도:"}),(0,a.jsxs)("span",{className:"text-purple-400",children:[A.toFixed(1),"x"]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"핀 개수:"}),(0,a.jsx)("span",{className:"text-blue-400",children:j.length})]})]})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-full bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 flex items-center justify-center",children:(0,a.jsxs)(i.Zp,{className:"bg-slate-800/50 border-slate-700 max-w-lg",children:[(0,a.jsx)(i.aR,{children:(0,a.jsxs)(i.ZB,{className:"text-white flex items-center gap-2",children:[(0,a.jsx)(c.A,{className:"w-6 h-6"}),"핀 모드"]})}),(0,a.jsxs)(i.Wu,{className:"text-center py-8",children:[(0,a.jsxs)("div",{className:"text-slate-400 mb-6",children:[(0,a.jsx)(c.A,{className:"w-24 h-24 mx-auto mb-4 opacity-50"}),"핀 모드에 선택된 곡이 없습니다"]}),(0,a.jsx)("p",{className:"text-slate-300 mb-6",children:"플레이 페이지에서 곡을 선택하여 핀 모드 게임을 시작하세요."}),(0,a.jsx)(g(),{href:"/play",children:(0,a.jsx)(l.$,{className:"bg-purple-500 hover:bg-purple-600 text-white",children:"곡 선택하기"})})]})]})})}},8756:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(2068).A)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},8997:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(2068).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])}},e=>{e.O(0,[387,806,587,18,358],()=>e(e.s=5464)),_N_E=e.O()}]);