"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[672],{826:(e,t,r)=>{r.d(t,{cn:()=>s});var a=r(2902),o=r(3714);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.QP)((0,a.$)(t))}},1119:(e,t,r)=>{r.d(t,{a:()=>o});class a{static getInstance(){return a.instance||(a.instance=new a),a.instance}get api(){if(!window.electronAPI)throw Error("Electron API not available. Make sure this is running in Electron.");return window.electronAPI}async getDifficulties(e){return await this.api.game.getDifficulties(e)}async startGame(e){console.log("\uD83D\uDD0C IPC: Calling game.start with params:",e);let t=await this.api.game.start(e);if(console.log("\uD83D\uDD0C IPC: game.start result:",t),!t.success)throw console.error("\uD83D\uDD0C IPC: Game start failed:",t.error),Error(t.error||"Failed to start game");return console.log("\uD83D\uDD0C IPC: Game start successful, returning mock session"),{sessionId:"mock-session-"+Date.now(),chartId:e.chartId,startTime:Date.now(),score:0,accuracy:1,combo:0}}async stopGame(){let e=await this.api.game.stop();if(!e.success)throw Error(e.error||"Failed to stop game")}async pauseGame(){let e=await this.api.game.pause();if(!e.success)throw Error(e.error||"Failed to pause game")}async resumeGame(){let e=await this.api.game.resume();if(!e.success)throw Error(e.error||"Failed to resume game")}throwKnife(e){this.api.game.throwKnife({id:e.id,time:e.time})}onKnifeResult(e){return this.api.game.onKnifeResult(e)}async getChartLibrary(){let e=await this.api.osz.getLibrary();if(!e.success)throw Error(e.error||"Failed to load chart library");return e.charts||[]}async getChart(e){let t=(await this.getChartLibrary()).find(t=>t.id===e);if(!t)throw Error("Chart ".concat(e," not found"));return t}async importChart(e){let t=await this.api.osz.import(e);return{success:t.success,error:t.error}}async removeChart(e){let t=await this.api.osz.removeChart(e);if(!t.success)throw Error(t.error||"Failed to remove chart")}async getChartAudio(e){let t=await this.api.osz.getAudio(e);if(!t.success)throw Error(t.error||"Failed to get audio");return"mock-audio-url"}async getChartBackground(e){return"mock-background-url"}async getSettings(){let e=await this.api.settings.getAll();if(!e.success)throw Error(e.error||"Failed to load settings");return e.settings||{audio:{masterVolume:1,musicVolume:.8,effectVolume:.6,enableFeedback:!0},game:{scrollSpeed:1,noteSize:1,enableParticles:!0,showFps:!1},display:{fullscreen:!1,vsync:!0,targetFps:60},controls:{keyBindings:{lane1:"D",lane2:"F",lane3:"J",lane4:"K"}}}}async setSetting(e,t){let r=await this.api.settings.set(e,t);if(!r.success)throw Error(r.error||"Failed to update setting")}async resetSettings(){let e=await this.api.settings.reset();if(!e.success)throw Error(e.error||"Failed to reset settings")}onSettingsChange(e){return this.api.settings.onChange(t=>{this.getSettings().then(e).catch(console.error)})}async getVersion(){return this.api.system.version||"0.1.0"}async openExternal(e){window.open(e,"_blank")}async showMessageBox(e){return{response:0}}}let o=a.getInstance()},1454:(e,t,r)=>{r.d(t,{v:()=>s});var a=r(7620),o=r(1119);function s(){let[e,t]=(0,a.useState)(()=>{{let e=localStorage.getItem("prg-currentSong");return e?JSON.parse(e):null}}),[r,s]=(0,a.useState)("osu"),[n,i]=(0,a.useState)(()=>localStorage.getItem("prg-gameState")||"idle");(0,a.useEffect)(()=>{console.log("\uD83C\uDFAE DEBUG: gameState changed to:",n),localStorage.setItem("prg-gameState",n)},[n]),(0,a.useEffect)(()=>{e?localStorage.setItem("prg-currentSong",JSON.stringify(e)):localStorage.removeItem("prg-currentSong")},[e]);let[l,c]=(0,a.useState)({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}}),g=(0,a.useRef)(0),u="playing"===n,d=(0,a.useCallback)(async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{i("loading");try{await o.a.stopGame(),console.log("\uD83D\uDED1 Stopped existing game session")}catch(e){console.log("ℹ️ No existing game to stop:",e)}console.log("\uD83C\uDFAE Starting pin game with song:",e.title,"(ID:",e.id,")");let r={chartId:e.id,difficulty:"Normal",gameMode:"osu",mods:[]};console.log("\uD83C\uDFAE Starting game with new API params:",r);let a=await o.a.startGame(r);return console.log("\uD83C\uDFAE Pin game session started:",a),console.log("\uD83C\uDFAE Setting currentSong and gameState to playing"),t(e),s("pin"),i("playing"),console.log('\uD83C\uDFAE GameState should now be "playing"'),setTimeout(()=>{console.log('\uD83C\uDFAE TIMEOUT CHECK: gameState after 100ms should be "playing"')},100),g.current=Date.now(),y(),!0}catch(e){return console.error("❌ Game start failed:",e),i("idle"),!1}},[]),m=(0,a.useCallback)(async()=>{try{"playing"===n||"paused"===n?await o.a.stopGame():console.log("\uD83D\uDED1 No game running, skipping stop command"),i("idle"),t(null),localStorage.removeItem("prg-gameState"),localStorage.removeItem("prg-currentSong")}catch(e){console.log("ℹ️ Stop game error (may be expected):",e),i("idle"),t(null),localStorage.removeItem("prg-gameState"),localStorage.removeItem("prg-currentSong")}},[n]),p=(0,a.useCallback)(async()=>{try{var e,t;(null==(t=window.electronAPI)||null==(e=t.game)?void 0:e.pause)&&(await window.electronAPI.game.pause(),i("paused"))}catch(e){console.error("❌ Failed to pause game:",e)}},[]),h=(0,a.useCallback)(async()=>{try{var e,t;(null==(t=window.electronAPI)||null==(e=t.game)?void 0:e.resume)&&(await window.electronAPI.game.resume(),i("playing"))}catch(e){console.error("❌ Failed to resume game:",e)}},[]),f=(0,a.useCallback)(e=>{c(t=>({...t,...e}))},[]),w=(0,a.useCallback)(async()=>{if(!e)return!1;try{var t;let r={songId:e.id,score:l.score,accuracy:l.accuracy,combo:l.combo,rank:(t=l.accuracy)>=97?"SS":t>=90?"S":t>=80?"A":t>=70?"B":t>=60?"C":t>=50?"D":"F",timestamp:Date.now()};return console.log("\uD83D\uDCCA Score submission (TODO):",r),!0}catch(e){return console.error("❌ Failed to submit score:",e),!1}},[e,l]),y=(0,a.useCallback)(()=>{c({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}})},[]);return{currentSong:e,gameMode:r,gameState:n,stats:l,isPlaying:u,startGame:d,stopGame:m,pauseGame:p,resumeGame:h,updateStats:f,submitScore:w,resetStats:y}}},5239:(e,t,r)=>{r.d(t,{BT:()=>c,Wu:()=>g,ZB:()=>l,Zp:()=>n,aR:()=>i});var a=r(4568),o=r(7620),s=r(826);let n=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...o})});n.displayName="Card";let i=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...o})});i.displayName="CardHeader";let l=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("font-semibold leading-none tracking-tight",r),...o})});l.displayName="CardTitle";let c=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...o})});c.displayName="CardDescription";let g=o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...o})});g.displayName="CardContent",o.forwardRef((e,t)=>{let{className:r,...o}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...o})}).displayName="CardFooter"},6845:(e,t,r)=>{r.d(t,{$:()=>c});var a=r(4568),o=r(7620),s=r(6118),n=r(4616),i=r(826);let l=(0,n.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",game:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-game hover:shadow-game/80 transform hover:scale-105 transition-all duration-200",perfect:"bg-game-perfect text-white shadow-lg hover:bg-game-perfect/90 animate-pulse-game",great:"bg-game-great text-white shadow-lg hover:bg-game-great/90",good:"bg-game-good text-white shadow-lg hover:bg-game-good/90",miss:"bg-game-miss text-white shadow-lg hover:bg-game-miss/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-9 w-9",game:"h-12 px-6 py-3 text-base font-semibold"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,t)=>{let{className:r,variant:o,size:n,asChild:c=!1,...g}=e,u=c?s.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(l({variant:o,size:n,className:r})),ref:t,...g})});c.displayName="Button"}}]);