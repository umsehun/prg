"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[110],{826:(e,r,t)=>{t.d(r,{cn:()=>n});var a=t(2902),o=t(3714);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,o.QP)((0,a.$)(r))}},1715:(e,r,t)=>{t.d(r,{s:()=>s,t:()=>n});var a=t(7620);function o(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function n(...e){return r=>{let t=!1,a=e.map(e=>{let a=o(e,r);return t||"function"!=typeof a||(t=!0),a});if(t)return()=>{for(let r=0;r<a.length;r++){let t=a[r];"function"==typeof t?t():o(e[r],null)}}}}function s(...e){return a.useCallback(n(...e),e)}},3842:(e,r,t)=>{t.d(r,{v:()=>s});var a=t(7620);class o{static getInstance(){return o.instance||(o.instance=new o),o.instance}get api(){if(!window.electronAPI)throw Error("Electron API not available. Make sure this is running in Electron.");return window.electronAPI}async startGame(e){let r=await this.api.game.start(e);if(!r.success)throw Error(r.error||"Failed to start game");return{sessionId:"mock-session-"+Date.now(),chartId:e.chartData.id,startTime:Date.now(),score:0,accuracy:1,combo:0}}async stopGame(){let e=await this.api.game.stop();if(!e.success)throw Error(e.error||"Failed to stop game")}async pauseGame(){let e=await this.api.game.pause();if(!e.success)throw Error(e.error||"Failed to pause game")}async resumeGame(){let e=await this.api.game.resume();if(!e.success)throw Error(e.error||"Failed to resume game")}throwKnife(e){this.api.game.throwKnife({id:e.id,time:e.time})}onKnifeResult(e){return this.api.game.onKnifeResult(e)}async getChartLibrary(){let e=await this.api.osz.getLibrary();if(!e.success)throw Error(e.error||"Failed to load chart library");return e.charts||[]}async getChart(e){let r=(await this.getChartLibrary()).find(r=>r.id===e);if(!r)throw Error("Chart ".concat(e," not found"));return r}async importChart(e){let r=await this.api.osz.import(e);return{success:r.success,error:r.error}}async removeChart(e){let r=await this.api.osz.removeChart(e);if(!r.success)throw Error(r.error||"Failed to remove chart")}async getChartAudio(e){let r=await this.api.osz.getAudio(e);if(!r.success)throw Error(r.error||"Failed to get audio");return"mock-audio-url"}async getChartBackground(e){return"mock-background-url"}async getSettings(){let e=await this.api.settings.getAll();if(!e.success)throw Error(e.error||"Failed to load settings");return e.settings||{audio:{masterVolume:1,musicVolume:.8,effectVolume:.6,enableFeedback:!0},game:{scrollSpeed:1,noteSize:1,enableParticles:!0,showFps:!1},display:{fullscreen:!1,vsync:!0,targetFps:60},controls:{keyBindings:{lane1:"D",lane2:"F",lane3:"J",lane4:"K"}}}}async setSetting(e,r){let t=await this.api.settings.set(e,r);if(!t.success)throw Error(t.error||"Failed to update setting")}async resetSettings(){let e=await this.api.settings.reset();if(!e.success)throw Error(e.error||"Failed to reset settings")}onSettingsChange(e){return this.api.settings.onChange(r=>{this.getSettings().then(e).catch(console.error)})}async getVersion(){return this.api.system.version||"0.1.0"}async openExternal(e){window.open(e,"_blank")}async showMessageBox(e){return{response:0}}}let n=o.getInstance();function s(){let[e,r]=(0,a.useState)(null),[t,o]=(0,a.useState)("osu"),[s,i]=(0,a.useState)("idle"),[l,c]=(0,a.useState)({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}}),u=(0,a.useRef)(0),d="playing"===s,g=(0,a.useCallback)(async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{i("loading");try{await n.stopGame(),console.log("\uD83D\uDED1 Stopped existing game session")}catch(e){console.log("ℹ️ No existing game to stop:",e)}let t={id:e.id,title:e.title,artist:e.artist,difficulty:"Normal",audioPath:e.audioFile||"/audio/".concat(e.id,".mp3"),backgroundPath:e.backgroundImage||void 0,duration:e.duration,bpm:e.bpm,notes:e.notes||[]};console.log("\uD83C\uDFAE Starting pin game with chart:",t);let a=await n.startGame({chartData:t,gameMode:"osu",mods:[]});return console.log("\uD83C\uDFAE Pin game session started:",a),r(e),o("pin"),i("playing"),u.current=Date.now(),w(),!0}catch(e){return console.error("❌ Game start failed:",e),i("idle"),!1}},[]),m=(0,a.useCallback)(async()=>{try{"playing"===s||"paused"===s?await n.stopGame():console.log("\uD83D\uDED1 No game running, skipping stop command"),i("idle"),r(null)}catch(e){console.log("ℹ️ Stop game error (may be expected):",e),i("idle"),r(null)}},[s]),p=(0,a.useCallback)(async()=>{try{var e,r;(null==(r=window.electronAPI)||null==(e=r.game)?void 0:e.pause)&&(await window.electronAPI.game.pause(),i("paused"))}catch(e){console.error("❌ Failed to pause game:",e)}},[]),f=(0,a.useCallback)(async()=>{try{var e,r;(null==(r=window.electronAPI)||null==(e=r.game)?void 0:e.resume)&&(await window.electronAPI.game.resume(),i("playing"))}catch(e){console.error("❌ Failed to resume game:",e)}},[]),h=(0,a.useCallback)(e=>{c(r=>({...r,...e}))},[]),y=(0,a.useCallback)(async()=>{if(!e)return!1;try{var r;let t={songId:e.id,score:l.score,accuracy:l.accuracy,combo:l.combo,rank:(r=l.accuracy)>=97?"SS":r>=90?"S":r>=80?"A":r>=70?"B":r>=60?"C":r>=50?"D":"F",timestamp:Date.now()};return console.log("\uD83D\uDCCA Score submission (TODO):",t),!0}catch(e){return console.error("❌ Failed to submit score:",e),!1}},[e,l]),w=(0,a.useCallback)(()=>{c({score:0,combo:0,accuracy:100,hits:{perfect:0,great:0,good:0,miss:0}})},[]);return{currentSong:e,gameMode:t,gameState:s,stats:l,isPlaying:d,startGame:g,stopGame:m,pauseGame:p,resumeGame:f,updateStats:h,submitScore:y,resetStats:w}}},4616:(e,r,t)=>{t.d(r,{F:()=>s});var a=t(2902);let o=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=a.$,s=(e,r)=>t=>{var a;if((null==r?void 0:r.variants)==null)return n(e,null==t?void 0:t.class,null==t?void 0:t.className);let{variants:s,defaultVariants:i}=r,l=Object.keys(s).map(e=>{let r=null==t?void 0:t[e],a=null==i?void 0:i[e];if(null===r)return null;let n=o(r)||o(a);return s[e][n]}),c=t&&Object.entries(t).reduce((e,r)=>{let[t,a]=r;return void 0===a||(e[t]=a),e},{});return n(e,l,null==r||null==(a=r.compoundVariants)?void 0:a.reduce((e,r)=>{let{class:t,className:a,...o}=r;return Object.entries(o).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...c}[r]):({...i,...c})[r]===t})?[...e,t,a]:e},[]),null==t?void 0:t.class,null==t?void 0:t.className)}},4751:(e,r,t)=>{t.d(r,{A:()=>a});let a=(0,t(2068).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},5239:(e,r,t)=>{t.d(r,{BT:()=>c,Wu:()=>u,ZB:()=>l,Zp:()=>s,aR:()=>i});var a=t(4568),o=t(7620),n=t(826);let s=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...o})});s.displayName="Card";let i=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...o})});i.displayName="CardHeader";let l=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("h3",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...o})});l.displayName="CardTitle";let c=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...o})});c.displayName="CardDescription";let u=o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...o})});u.displayName="CardContent",o.forwardRef((e,r)=>{let{className:t,...o}=e;return(0,a.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...o})}).displayName="CardFooter"},6118:(e,r,t)=>{t.d(r,{DX:()=>i,TL:()=>s});var a=t(7620),o=t(1715),n=t(4568);function s(e){let r=function(e){let r=a.forwardRef((e,r)=>{let{children:t,...n}=e;if(a.isValidElement(t)){var s;let e,i,l=(s=t,(i=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(i=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),c=function(e,r){let t={...r};for(let a in r){let o=e[a],n=r[a];/^on[A-Z]/.test(a)?o&&n?t[a]=(...e)=>{let r=n(...e);return o(...e),r}:o&&(t[a]=o):"style"===a?t[a]={...o,...n}:"className"===a&&(t[a]=[o,n].filter(Boolean).join(" "))}return{...e,...t}}(n,t.props);return t.type!==a.Fragment&&(c.ref=r?(0,o.t)(r,l):l),a.cloneElement(t,c)}return a.Children.count(t)>1?a.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}(e),t=a.forwardRef((e,t)=>{let{children:o,...s}=e,i=a.Children.toArray(o),l=i.find(c);if(l){let e=l.props.children,o=i.map(r=>r!==l?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,n.jsx)(r,{...s,ref:t,children:a.isValidElement(e)?a.cloneElement(e,void 0,o):null})}return(0,n.jsx)(r,{...s,ref:t,children:o})});return t.displayName=`${e}.Slot`,t}var i=s("Slot"),l=Symbol("radix.slottable");function c(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}},6845:(e,r,t)=>{t.d(r,{$:()=>c});var a=t(4568),o=t(7620),n=t(6118),s=t(4616),i=t(826);let l=(0,s.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",game:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground shadow-game hover:shadow-game/80 transform hover:scale-105 transition-all duration-200",perfect:"bg-game-perfect text-white shadow-lg hover:bg-game-perfect/90 animate-pulse-game",great:"bg-game-great text-white shadow-lg hover:bg-game-great/90",good:"bg-game-good text-white shadow-lg hover:bg-game-good/90",miss:"bg-game-miss text-white shadow-lg hover:bg-game-miss/90"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",xl:"h-12 rounded-lg px-10 text-base",icon:"h-9 w-9",game:"h-12 px-6 py-3 text-base font-semibold"}},defaultVariants:{variant:"default",size:"default"}}),c=o.forwardRef((e,r)=>{let{className:t,variant:o,size:s,asChild:c=!1,...u}=e,d=c?n.DX:"button";return(0,a.jsx)(d,{className:(0,i.cn)(l({variant:o,size:s,className:t})),ref:r,...u})});c.displayName="Button"}}]);